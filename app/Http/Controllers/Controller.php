<?php
bolt_decrypt( __FILE__ , 'Ke4qGd'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnM7Cgp1c2UgSWxsdW1pbmF0ZVxGb3VuZGF0aW9uXEF1dGhcQWNjZXNzXEF1dGhvcml6ZXNSZXF1ZXN0czsKdXNlIElsbHVtaW5hdGVcRm91bmRhdGlvblxCdXNcRGlzcGF0Y2hlc0pvYnM7CnVzZSBJbGx1bWluYXRlXEZvdW5kYXRpb25cVmFsaWRhdGlvblxWYWxpZGF0ZXNSZXF1ZXN0czsKdXNlIElsbHVtaW5hdGVcUm91dGluZ1xDb250cm9sbGVyIGFzIEJhc2VDb250cm9sbGVyOwoKdXNlIEFwcFxNb2RlbHNcVXNlckxvZzsKdXNlIEltYWdlOwp1c2UgSWxsdW1pbmF0ZVxQYWdpbmF0aW9uXExlbmd0aEF3YXJlUGFnaW5hdG9yOwp1c2UgSWxsdW1pbmF0ZVxQYWdpbmF0aW9uXFBhZ2luYXRvcjsKdXNlIElsbHVtaW5hdGVcU3VwcG9ydFxDb2xsZWN0aW9uOwoKY2xhc3MgQ29udHJvbGxlciBleHRlbmRzIEJhc2VDb250cm9sbGVyCnsKICAgIHVzZSBBdXRob3JpemVzUmVxdWVzdHMsIERpc3BhdGNoZXNKb2JzLCBWYWxpZGF0ZXNSZXF1ZXN0czsKCiAgICAjIFdyaXRlIEV2ZXJ5IEV2ZW50cyBpbiBMb2cgRmlsZQogICAgcHVibGljIGZ1bmN0aW9uIGxvZ0ZpbGVXcml0ZSgkbWVzc2FnZSwgJGV2ZW50X2lkKXsKICAgICAgICAkbG9nX21lc3NhZ2UgPSBkYXRlKCJZLW0tZCBIOmk6cyIpLiIgXCIiLkF1dGgoKS0+dXNlcigpLT5hc3NvY2lhdGVfaWQuIlwiICIuJG1lc3NhZ2UuIiAiLiRldmVudF9pZC5QSFBfRU9MOwogICAgICAgICRsb2dfbWVzc2FnZSAuPSBmaWxlX2dldF9jb250ZW50cygiYXNzZXRzL2xvZy50eHQiKTsKICAgICAgICBmaWxlX3B1dF9jb250ZW50cygiYXNzZXRzL2xvZy50eHQiLCAkbG9nX21lc3NhZ2UpOwoKICAgICAgICAkYXNzb2NpYXRlX2lkPUF1dGgoKS0+dXNlcigpLT5hc3NvY2lhdGVfaWQ7CiAgICAgICAgJGxvZ3M9VXNlckxvZzo6d2hlcmUoJ2xvZ19hc19pZCcsJGFzc29jaWF0ZV9pZCktPm9yZGVyQnkoJ3VwZGF0ZWRfYXQnLCdBU0MnKS0+Z2V0KCk7CiAgICAgICAgaWYoY291bnQoJGxvZ3MpPDMpewogICAgICAgICAgICAkdXNlcl9sb2c9IG5ldyBVc2VyTG9nOwogICAgICAgIH1lbHNlewogICAgICAgICAgICAkdXNlcl9sb2cgPSRsb2dzLT5maXJzdCgpOwogICAgICAgICAgICAkdXNlcl9sb2ctPmlkID0gJGxvZ3MtPmZpcnN0KCktPmlkOwogICAgICAgIH0KICAgICAgICAgICAgJHVzZXJfbG9nLT5sb2dfYXNfaWQgPSAkYXNzb2NpYXRlX2lkOwogICAgICAgICAgICAkdXNlcl9sb2ctPmxvZ19tZXNzYWdlID0gJG1lc3NhZ2U7CiAgICAgICAgICAgICR1c2VyX2xvZy0+bG9nX3RhYmxlID0gJyc7CiAgICAgICAgICAgICR1c2VyX2xvZy0+bG9nX3Jvd19ubyA9ICRldmVudF9pZDsKICAgICAgICAgICAgJHVzZXJfbG9nLT5zYXZlKCk7CgogICAgfQoKICAgIC8vIHdyaXRlIGV2ZXJ5IGV2ZW50cyBpbiBsb2cgZmlsZSBwcm9jZXNzIHF1ZXVlIHByb2NlZHUKICAgIHB1YmxpYyBmdW5jdGlvbiBsb2dGaWxlV3JpdGVKb2JzKCRtZXNzYWdlLCAkZXZlbnRfaWQpCiAgICB7CiAgICAgICAgJGZpbGVQYXRoID0gdXJsKCcvYXNzZXRzXGxvZy50eHQnKTsKICAgIAkkam9iID0gKG5ldyBQcm9jZXNzTG9nRmlsZShhdXRoKCktPnVzZXIoKS0+YXNzb2NpYXRlX2lkLCAkbWVzc2FnZSwgJGV2ZW50X2lkLCAkZmlsZVBhdGgpKQogICAgICAgIC0+ZGVsYXkoQ2FyYm9uOjpub3coKS0+YWRkU2Vjb25kcygxMCkpOwogICAgICAgIGRpc3BhdGNoKCRqb2IpOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBxdW90ZVJlcGxhY2VIdG1sRW50cnkoJGRhdGEpCiAgICB7CiAgICAgICAgaWYoc3RycG9zKCRkYXRhLCAiJyIpICE9PSBGQUxTRSl7CiAgICAgICAgICByZXR1cm4gc3RyX3JlcGxhY2UoIiciLCAiJiMzOTsiLCAkZGF0YSk7CiAgICAgICAgfWVsc2VpZihzdHJwb3MoJGRhdGEsICciJykgIT09IEZBTFNFKXsKICAgICAgICAgIHJldHVybiBzdHJfcmVwbGFjZSgnIicsICImIzM0OyIsICRkYXRhKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgIHJldHVybiAkZGF0YTsKICAgICAgICB9CgoKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0VGFibGVOYW1lVW5pdCgkdW5pdCl7CiAgICAgIGlmKCR1bml0ID09MSB8fCAkdW5pdD09NCB8fCAkdW5pdD09NSB8fCAkdW5pdD09OSl7CiAgICAgICAgICAkdGFibGVOYW1lPSJocl9hdHRlbmRhbmNlX21ibSBBUyBhIjsKICAgICAgfWVsc2UgaWYoJHVuaXQgPT0yKXsKICAgICAgICAgICR0YWJsZU5hbWU9ImhyX2F0dGVuZGFuY2VfY2VpbCBBUyBhIjsKICAgICAgfWVsc2UgaWYoJHVuaXQgPT0zKXsKICAgICAgICAgICR0YWJsZU5hbWU9ImhyX2F0dGVuZGFuY2VfYXFsIEFTIGEiOwogICAgICB9ZWxzZSBpZigkdW5pdCA9PTYpewogICAgICAgICAgJHRhYmxlTmFtZT0iaHJfYXR0ZW5kYW5jZV9obyBBUyBhIjsKICAgICAgfWVsc2UgaWYoJHVuaXQgPT04KXsKICAgICAgICAgICR0YWJsZU5hbWU9ImhyX2F0dGVuZGFuY2VfY2V3IEFTIGEiOwogICAgICB9ZWxzZXsKICAgICAgICAgICR0YWJsZU5hbWU9ImhyX2F0dGVuZGFuY2VfbWJtIEFTIGEiOwogICAgICB9CgogICAgICByZXR1cm4gJHRhYmxlTmFtZTsKCiAgfQoKCiAgLy9Gcm9tIEJpenogc29sdXRpb24KICAgcHVibGljIGZ1bmN0aW9uIGJhY2tXaXRoRXJyb3IoJG1lc3NhZ2UpCiAgICB7CiAgICAgICAgJG5vdGlmaWNhdGlvbiA9IFsKICAgICAgICAgICAgJ21lc3NhZ2UnID0+ICRtZXNzYWdlLAogICAgICAgICAgICAnYWxlcnQtdHlwZScgPT4gJ2Vycm9yJwogICAgICAgIF07CiAgICAgICAgcmV0dXJuIGJhY2soKS0+d2l0aCgkbm90aWZpY2F0aW9uKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gYmFja1dpdGhTdWNjZXNzKCRtZXNzYWdlKQogICAgewogICAgICAgICRub3RpZmljYXRpb24gPSBbCiAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkbWVzc2FnZSwKICAgICAgICAgICAgJ2FsZXJ0LXR5cGUnID0+ICdzdWNjZXNzJwogICAgICAgIF07CiAgICAgICAgcmV0dXJuIGJhY2soKS0+d2l0aCgkbm90aWZpY2F0aW9uKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gYmFja1dpdGhXYXJuaW5nKCRtZXNzYWdlKQogICAgewogICAgICAgICRub3RpZmljYXRpb24gPSBbCiAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkbWVzc2FnZSwKICAgICAgICAgICAgJ2FsZXJ0LXR5cGUnID0+ICd3YXJuaW5nJwogICAgICAgIF07CiAgICAgICAgcmV0dXJuIGJhY2soKS0+d2l0aCgkbm90aWZpY2F0aW9uKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gcmVkaXJlY3RCYWNrV2l0aFdhcm5pbmcoJG1lc3NhZ2UsICRyb3V0ZSkKICAgIHsKICAgICAgICAkbm90aWZpY2F0aW9uID0gWwogICAgICAgICAgICAnbWVzc2FnZScgPT4gJG1lc3NhZ2UsCiAgICAgICAgICAgICdhbGVydC10eXBlJyA9PiAnd2FybmluZycKICAgICAgICBdOwogICAgICAgIHJldHVybiByZWRpcmVjdCgpLT5yb3V0ZSgkcm91dGUpLT53aXRoKCRub3RpZmljYXRpb24pOwogICAgfQogICAgcHVibGljIGZ1bmN0aW9uIHJlZGlyZWN0QmFja1dpdGhFcnJvcigkbWVzc2FnZSwgJHJvdXRlKQogICAgewogICAgICAgICRub3RpZmljYXRpb24gPSBbCiAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkbWVzc2FnZSwKICAgICAgICAgICAgJ2FsZXJ0LXR5cGUnID0+ICdlcnJvcicKICAgICAgICBdOwogICAgICAgIHJldHVybiByZWRpcmVjdCgpLT5yb3V0ZSgkcm91dGUpLT53aXRoKCRub3RpZmljYXRpb24pOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiByZWRpcmVjdEJhY2tXaXRoU3VjY2VzcygkbWVzc2FnZSwgJHJvdXRlKQogICAgewogICAgICAgICRub3RpZmljYXRpb24gPSBbCiAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkbWVzc2FnZSwKICAgICAgICAgICAgJ2FsZXJ0LXR5cGUnID0+ICdzdWNjZXNzJwogICAgICAgIF07CiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KCktPnJvdXRlKCRyb3V0ZSktPndpdGgoJG5vdGlmaWNhdGlvbik7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHVybFJlZGlyZWN0QmFjaygkbWVzc2FnZSwgJHVybCwgJGFsZXJ0VHlwZSkKICAgIHsKICAgICAgICAkbm90aWZpY2F0aW9uID0gWwogICAgICAgICAgICAnbWVzc2FnZScgPT4gJG1lc3NhZ2UsCiAgICAgICAgICAgICdhbGVydC10eXBlJyA9PiAkYWxlcnRUeXBlCiAgICAgICAgXTsKICAgICAgICByZXR1cm4gcmVkaXJlY3QoJHVybCktPndpdGgoJG5vdGlmaWNhdGlvbik7CiAgICB9CgogICAgZnVuY3Rpb24gcGhvdG9VcGxvYWQoJHBob3RvRGF0YSwkZm9sZGVyTmFtZSwkd2lkdGg9bnVsbCwkaGVpZ2h0PW51bGwpCiAgICB7CgogICAgICAgICRwaG90b09yZ05hbWUgPSAkcGhvdG9EYXRhLT5nZXRDbGllbnRPcmlnaW5hbE5hbWUoKTsKICAgICAgICAkcGhvdG9UeXBlID0gJHBob3RvRGF0YS0+Z2V0Q2xpZW50T3JpZ2luYWxFeHRlbnNpb24oKTsKCiAgICAgICAgLy8kZmlsZVR5cGUgPSAkcGhvdG9EYXRhLT5nZXRDbGllbnRPcmlnaW5hbE5hbWUoKTsKICAgICAgICAkZmlsZU5hbWUgPSBzdWJzdHIoJHBob3RvT3JnTmFtZSwgMCwgLTQpIC4gZGF0ZSgnZC1tLVktaS1zJykgLiAnLicgLiAkcGhvdG9UeXBlOwogICAgICAgICRwYXRoMiA9ICRmb2xkZXJOYW1lIC4gZGF0ZSgnL1kvbS9kLycpOwogICAgICAgIC8vcmV0dXJuICRwYXRoMjsKICAgICAgICBpZiAoIWlzX2RpcihwdWJsaWNfcGF0aCgkcGF0aDIpKSkgewogICAgICAgICAgICBta2RpcihwdWJsaWNfcGF0aCgkcGF0aDIpLCAwNzc3LCB0cnVlKTsKICAgICAgICB9CgoKICAgICAgICAkcGhvdG9EYXRhLT5tb3ZlKHB1YmxpY19wYXRoKCRwYXRoMiksICRmaWxlTmFtZSk7CgogICAgICAgIGlmICgkd2lkdGggIT0gbnVsbCAmJiAkaGVpZ2h0ICE9IG51bGwpIHsgLy8gd2lkdGggJiBoZWlnaHQgbWVudGlvbi0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgJGltZyA9IFxJbWFnZTo6bWFrZShwdWJsaWNfcGF0aCgkcGF0aDIgLiAkZmlsZU5hbWUpKTsKICAgICAgICAgICAgJGltZy0+ZW5jb2RlKCd3ZWJwJywgNzUpLT5yZXNpemUoJHdpZHRoLCAkaGVpZ2h0KTsKICAgICAgICAgICAgJGltZy0+c2F2ZShwdWJsaWNfcGF0aCgkcGF0aDIgLiAkZmlsZU5hbWUpKTsKICAgICAgICAgICAgcmV0dXJuICRwaG90b1VwbG9hZGVkUGF0aCA9ICRwYXRoMiAuICRmaWxlTmFtZTsKCiAgICAgICAgfSBlbHNlaWYgKCR3aWR0aCAhPSBudWxsKSB7IC8vIG9ubHkgd2lkdGggbWVudGlvbi0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgICAgICRpbWcgPSBcSW1hZ2U6Om1ha2UocHVibGljX3BhdGgoJHBhdGgyIC4gJGZpbGVOYW1lKSk7CiAgICAgICAgICAgICRpbWctPmVuY29kZSgnd2VicCcsIDc1KS0+cmVzaXplKCR3aWR0aCwgbnVsbCwgZnVuY3Rpb24gKCRjb25zdHJhaW50KSB7CiAgICAgICAgICAgICAgICAkY29uc3RyYWludC0+YXNwZWN0UmF0aW8oKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICRpbWctPnNhdmUocHVibGljX3BhdGgoJHBhdGgyIC4gJGZpbGVOYW1lKSk7CgogICAgICAgICAgICByZXR1cm4gJHBob3RvVXBsb2FkZWRQYXRoID0gJHBhdGgyIC4gJGZpbGVOYW1lOwoKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkaW1nID0gXEltYWdlOjptYWtlKHB1YmxpY19wYXRoKCRwYXRoMiAuICRmaWxlTmFtZSkpOwogICAgICAgICAgICAkaW1nLT5zYXZlKHB1YmxpY19wYXRoKCRwYXRoMiAuICRmaWxlTmFtZSkpOwogICAgICAgICAgICByZXR1cm4gJHBob3RvVXBsb2FkZWRQYXRoID0gJHBhdGgyIC4gJGZpbGVOYW1lOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBmaWxlSW5mbygkZmlsZSkKICAgIHsKICAgICAgICBpZihpc3NldCgkZmlsZSkpewogICAgICAgICAgICByZXR1cm4gYXJyYXkoCiAgICAgICAgICAgICAgICAnbmFtZScgPT4gJGZpbGUtPmdldENsaWVudE9yaWdpbmFsTmFtZSgpLCAKICAgICAgICAgICAgICAgICd0eXBlJyA9PiAkZmlsZS0+Z2V0Q2xpZW50TWltZVR5cGUoKSwgCiAgICAgICAgICAgICAgICAnc2l6ZScgPT4gJGZpbGUtPmdldFNpemUoKSwgCiAgICAgICAgICAgICAgICAnd2lkdGgnID0+IGlzc2V0KGdldGltYWdlc2l6ZSgkZmlsZSlbMF0pID8gZ2V0aW1hZ2VzaXplKCRmaWxlKVswXSA6IDAsIAogICAgICAgICAgICAgICAgJ2hlaWdodCcgPT4gaXNzZXQoZ2V0aW1hZ2VzaXplKCRmaWxlKVsxXSkgPyBnZXRpbWFnZXNpemUoJGZpbGUpWzFdIDogMCwgCiAgICAgICAgICAgICAgICAnZXh0ZW5zaW9uJyA9PiAkZmlsZS0+Z2V0Q2xpZW50T3JpZ2luYWxFeHRlbnNpb24oKSwgCiAgICAgICAgICAgICk7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHJldHVybiBhcnJheSgKICAgICAgICAgICAgICAgICduYW1lJyA9PiAnJywgCiAgICAgICAgICAgICAgICAndHlwZScgPT4gJycsIAogICAgICAgICAgICAgICAgJ3NpemUnID0+ICcnLCAKICAgICAgICAgICAgICAgICd3aWR0aCcgPT4gJycsIAogICAgICAgICAgICAgICAgJ2hlaWdodCcgPT4gJycsIAogICAgICAgICAgICAgICAgJ2V4dGVuc2lvbicgPT4gJycsIAogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBmaWxlVXBsb2FkKCRmaWxlZGF0YSwgJGZvbGRlck5hbWUsICRyZXNpemUgPSBmYWxzZSwgJHdpZHRoID0gMTkyLCAkaGVpZ2h0ID0gbnVsbCl7CiAgICAgICAgJHR5cGUgPSAkZmlsZWRhdGEtPmdldENsaWVudE9yaWdpbmFsRXh0ZW5zaW9uKCk7CiAgICAgICAgJGZpbGVuYW1lID0gcmFuZCgxLCAxMDAwKSAuIGRhdGUoJ2RteWhpcycpIC4gIi4iIC4gJHR5cGU7CiAgICAgICAgJGZpbGVwYXRoID0gJGZvbGRlck5hbWUuIGRhdGUoJy9ZL20vZC8nKTsKICAgICAgICBpZiAoIWZpbGVfZXhpc3RzKHB1YmxpY19wYXRoKCRmaWxlcGF0aCkpKSB7CiAgICAgICAgICAgIG1rZGlyKHB1YmxpY19wYXRoKCRmaWxlcGF0aCksIDA3NzcsIHRydWUpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZigkcmVzaXplKXsKICAgICAgICAgICAgJGltYWdlID0gXEltYWdlOjptYWtlKCRmaWxlZGF0YS0+cGF0aCgpKTsKICAgICAgICAgICAgJGltYWdlLT5yZXNpemUoJHdpZHRoLCAkaGVpZ2h0LCBmdW5jdGlvbiAoJGNvbnN0cmFpbnQpIHsKICAgICAgICAgICAgICAgICRjb25zdHJhaW50LT5hc3BlY3RSYXRpbygpOwogICAgICAgICAgICB9KS0+c2F2ZShwdWJsaWNfcGF0aCgkZmlsZXBhdGgpLicvJy4kZmlsZW5hbWUpOwogICAgICAgIH1lbHNlewogICAgICAgICAgICAkZmlsZWRhdGEtPm1vdmUocHVibGljX3BhdGgoJGZpbGVwYXRoKSwkZmlsZW5hbWUpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICgkZmlsZXBhdGggLiAkZmlsZW5hbWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbGVEZWxldGUoJHBhdGgpewogICAgICAgIGlmKCFlbXB0eSgkcGF0aCkgJiYgZmlsZV9leGlzdHMocHVibGljX3BhdGgoJHBhdGgpKSl7CiAgICAgICAgICAgIHJldHVybiB1bmxpbmsocHVibGljX3BhdGgoJHBhdGgpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBwYWdpbmF0ZSgkaXRlbXMsICRwZXJQYWdlLCAkcGFnZSA9IG51bGwsICRvcHRpb25zID0gW10pCiAgICB7CiAgICAgICAgJHBhZ2UgPSAkcGFnZSA/OiAoUGFnaW5hdG9yOjpyZXNvbHZlQ3VycmVudFBhZ2UoKSA/OiAxKTsKICAgICAgICAkaXRlbXMgPSAkaXRlbXMgaW5zdGFuY2VvZiBDb2xsZWN0aW9uID8gJGl0ZW1zIDogQ29sbGVjdGlvbjo6bWFrZSgkaXRlbXMpOwogICAgICAgIHJldHVybiBuZXcgTGVuZ3RoQXdhcmVQYWdpbmF0b3IoJGl0ZW1zLT5mb3JQYWdlKCRwYWdlLCAkcGVyUGFnZSksICRpdGVtcy0+Y291bnQoKSwgJHBlclBhZ2UsICRwYWdlLCAkb3B0aW9ucyk7CiAgICB9Cgp9Cg==