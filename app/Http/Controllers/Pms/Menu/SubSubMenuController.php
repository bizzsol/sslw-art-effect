<?php
bolt_decrypt( __FILE__ , 'YBw9sB'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcUG1zXE1lbnU7Cgp1c2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcQ29udHJvbGxlcjsKdXNlIElsbHVtaW5hdGVcSHR0cFxSZXF1ZXN0OwoKdXNlIEFwcFxIdHRwXFJlcXVlc3RzOwp1c2UgQXBwXE1vZGVsc1xNZW51Owp1c2UgQXBwXE1vZGVsc1xTdWJNZW51Owp1c2UgQXBwXE1vZGVsc1xTdWJTdWJNZW51Owp1c2UgQXBwXE1vZGVsc1xQYWdlOwp1c2UgXFNwYXRpZVxQZXJtaXNzaW9uXE1vZGVsc1xQZXJtaXNzaW9uOwp1c2UgVmFsaWRhdG9yLE15SGVscGVyOwoKY2xhc3MgU3ViU3ViTWVudUNvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyCnsKICAgIHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpewogICAgICAgICR0aGlzLT5taWRkbGV3YXJlKCdhdXRoJyk7CiAgICB9CiAgICAvKioKICAgICAqIERpc3BsYXkgYSBsaXN0aW5nIG9mIHRoZSByZXNvdXJjZS4KICAgICAqCiAgICAgKiBAcmV0dXJuIFxJbGx1bWluYXRlXEh0dHBcUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGluZGV4KCkKICAgIHsKICAgICAgICAvLwogICAgfQoKICAgIC8qKgogICAgICogU2hvdyB0aGUgZm9ybSBmb3IgY3JlYXRpbmcgYSBuZXcgcmVzb3VyY2UuCiAgICAgKgogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBjcmVhdGUoKQogICAgewogICAgICAgIC8vCiAgICB9CgogICAgLyoqCiAgICAgKiBTdG9yZSBhIG5ld2x5IGNyZWF0ZWQgcmVzb3VyY2UgaW4gc3RvcmFnZS4KICAgICAqCiAgICAgKiBAcGFyYW0gIFxJbGx1bWluYXRlXEh0dHBcUmVxdWVzdCAgJHJlcXVlc3QKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc3RvcmUoUmVxdWVzdCAkcmVxdWVzdCkKICAgIHsKICAgICAgICAgJGlucHV0ID0gJHJlcXVlc3QtPmFsbCgpOwogICAgICAgIGlmKGlzc2V0KCRpbnB1dFsncGFnZSddKSl7CiAgICAgICAgICAgICRwYWdlPVBhZ2U6OnNlbGVjdCgnbmFtZScsJ25hbWVfYm4nKS0+d2hlcmUoJ2xpbmsnLCRpbnB1dFsncGFnZSddKS0+Zmlyc3QoKTsKICAgICAgICAgICAgJGlucHV0WyduYW1lJ109JHBhZ2VbJ25hbWUnXTsKICAgICAgICAgICAgJGlucHV0WyduYW1lX2JuJ109JHBhZ2VbJ25hbWVfYm4nXTsKICAgICAgICAgICAgJGlucHV0Wyd1cmwnXT0icGFnZS8iLiRpbnB1dFsncGFnZSddOwogICAgICAgIH0KCiAgICAgICAgJHZhbGlkYXRvciA9IFZhbGlkYXRvcjo6bWFrZSgkaW5wdXQsIFsgICAKICAgICAgICAgICAgICAgICAgICAnbmFtZSc9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAgICAgICAgICd1cmwnPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgICAgICAgICAnaWNvbicgPT4gJ21pbWVzOmpwZWcsanBnLGJtcCxwbmcnCiAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgIGlmICgkdmFsaWRhdG9yLT5mYWlscygpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZGlyZWN0KCktPmJhY2soKS0+d2l0aEVycm9ycygkdmFsaWRhdG9yKS0+d2l0aElucHV0KCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgIHRyeXsKICAgICAgICAgICAgJGlucHV0WydzbHVnJ109anNvbl9lbmNvZGUoJHJlcXVlc3QtPnNsdWcpOwoKICAgICAgICAgICAgaWYgKCRyZXF1ZXN0LT5oYXNGaWxlKCdpY29uJykpewogICAgICAgICAgICAgICAgJGlucHV0WydpY29uJ109TXlIZWxwZXI6OnBob3RvVXBsb2FkKCRyZXF1ZXN0LT5maWxlKCdpY29uJyksJ2ltYWdlcy9tZW51L3N1Yi1zdWItbWVudS9pY29uLycsMzIpOwogICAgICAgICAgICAgICAgJGlucHV0WydiaWdfaWNvbiddPU15SGVscGVyOjpwaG90b1VwbG9hZCgkcmVxdWVzdC0+ZmlsZSgnaWNvbicpLCdpbWFnZXMvbWVudS9zdWItc3ViLW1lbnUvYmlnLWljb24vJywxMjgpOwogICAgICAgICAgICB9CgoKICAgICAgICAgICAgU3ViU3ViTWVudTo6Y3JlYXRlKCRpbnB1dCk7CgogICAgICAgICAgICAgICAgJGJ1Zz0wOwogICAgICAgICAgICAgfWNhdGNoKFxFeGNlcHRpb24gJGUpewogICAgICAgICAgICAgICAgJGJ1Zz0kZS0+ZXJyb3JJbmZvWzFdOwogICAgICAgICAgICB9CiAgICAgICAgICAgICBpZigkYnVnPT0wKXsKICAgICAgICAgICAgcmV0dXJuIHJlZGlyZWN0KCktPmJhY2soKS0+d2l0aCgnc3VjY2VzcycsJ1N1Y2Nlc3NmdWxseSBJbnNlcnRlZCcpOwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIHJldHVybiByZWRpcmVjdCgpLT5iYWNrKCktPndpdGgoJ2Vycm9yJywnU29tZXRoaW5nIEVycm9yIEZvdW5kICEgJyk7CiAgICAgICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIERpc3BsYXkgdGhlIHNwZWNpZmllZCByZXNvdXJjZS4KICAgICAqCiAgICAgKiBAcGFyYW0gIGludCAgJGlkCiAgICAgKiBAcmV0dXJuIFxJbGx1bWluYXRlXEh0dHBcUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHNob3coJGlkKQogICAgewoKICAgICAgICAkYWxsRGF0YT1TdWJTdWJNZW51OjpsZWZ0Sm9pbignc3ViX21lbnVzJywnc3ViX3N1Yl9tZW51cy5zdWJfbWVudV9pZCcsJz0nLCdzdWJfbWVudXMuaWQnKQogICAgICAgICAgIC0+bGVmdEpvaW4oJ21lbnVzJywnc3ViX21lbnVzLm1lbnVfaWQnLCc9JywnbWVudXMuaWQnKQogICAgICAgICAgIC0+c2VsZWN0KCdzdWJfc3ViX21lbnVzLionLCdtZW51cy5uYW1lIGFzIG1lbnVfbmFtZScsJ3N1Yl9tZW51cy5uYW1lIGFzIHN1Yl9tZW51X25hbWUnKQogICAgICAgICAgIC0+d2hlcmUoJ3N1Yl9zdWJfbWVudXMuc3ViX21lbnVfaWQnLCRpZCktPm9yZGVyQnkoJ3N1Yl9zdWJfbWVudXMuc2VyaWFsX251bScsJ0RFU0MnKS0+cGFnaW5hdGUoMjApOwoKICAgICAgICAkc3ViTWVudT1TdWJNZW51OjpmaW5kT3JGYWlsKCRpZCk7CiAgICAgICAgJG1lbnU9TWVudTo6ZmluZE9yRmFpbCgkc3ViTWVudS0+bWVudV9pZCk7CgogICAgICAgICRtYXhfc2VyaWFsPVN1YlN1Yk1lbnU6OndoZXJlKCdzdWJfbWVudV9pZCcsJGlkKS0+bWF4KCdzZXJpYWxfbnVtJyk7CgogICAgICAgICRwZXJtaXNzaW9ucyA9UGVybWlzc2lvbjo6b3JkZXJCeSgnaWQnLCdERVNDJyktPnBsdWNrKCduYW1lJywgJ25hbWUnKTsKCiAgICAgICAgcmV0dXJuIHZpZXcoJ2FkbWluLm1lbnUuc3ViU3ViTWVudScsY29tcGFjdCgnYWxsRGF0YScsJ21heF9zZXJpYWwnLCdtZW51Jywnc3ViTWVudScsJ3Blcm1pc3Npb25zJykpOwogICAgfQoKICAgIC8qKgogICAgICogU2hvdyB0aGUgZm9ybSBmb3IgZWRpdGluZyB0aGUgc3BlY2lmaWVkIHJlc291cmNlLgogICAgICoKICAgICAqIEBwYXJhbSAgaW50ICAkaWQKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZWRpdCgkaWQpCiAgICB7CiAgICAgICAgJGRhdGE9U3ViU3ViTWVudTo6bGVmdEpvaW4oJ3N1Yl9tZW51cycsJ3N1Yl9zdWJfbWVudXMuc3ViX21lbnVfaWQnLCc9Jywnc3ViX21lbnVzLmlkJykKICAgICAgICAgICAgLT5sZWZ0Sm9pbignbWVudXMnLCdzdWJfbWVudXMubWVudV9pZCcsJz0nLCdtZW51cy5pZCcpCiAgICAgICAgICAgIC0+c2VsZWN0KCdzdWJfc3ViX21lbnVzLionLCdtZW51cy5uYW1lIGFzIG1lbnVfbmFtZScsJ3N1Yl9tZW51cy5uYW1lIGFzIHN1Yl9tZW51X25hbWUnKQogICAgICAgICAgICAtPndoZXJlKCdzdWJfc3ViX21lbnVzLmlkJywkaWQpLT5vcmRlckJ5KCdzdWJfc3ViX21lbnVzLnNlcmlhbF9udW0nLCdERVNDJyktPmZpcnN0KCk7CgogICAgICAgICRzdWJNZW51PVN1Yk1lbnU6OmZpbmRPckZhaWwoJGRhdGEtPnN1Yl9tZW51X2lkKTsKICAgICAgICAkbWVudT1NZW51OjpmaW5kT3JGYWlsKCRzdWJNZW51LT5tZW51X2lkKTsKCiAgICAgICAgJG1heF9zZXJpYWw9U3ViU3ViTWVudTo6d2hlcmUoJ3N1Yl9tZW51X2lkJywkaWQpLT5tYXgoJ3NlcmlhbF9udW0nKTsKCiAgICAgICAgJHBlcm1pc3Npb25zID1QZXJtaXNzaW9uOjpvcmRlckJ5KCdpZCcsJ0RFU0MnKS0+cGx1Y2soJ25hbWUnLCAnbmFtZScpOwoKICAgICAgICByZXR1cm4gdmlldygnYWRtaW4ubWVudS5zdWJTdWJNZW51RWRpdCcsY29tcGFjdCgnZGF0YScsJ21heF9zZXJpYWwnLCdtZW51Jywnc3ViTWVudScsJ3Blcm1pc3Npb25zJykpOwogICAgfQoKICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBzcGVjaWZpZWQgcmVzb3VyY2UgaW4gc3RvcmFnZS4KICAgICAqCiAgICAgKiBAcGFyYW0gIFxJbGx1bWluYXRlXEh0dHBcUmVxdWVzdCAgJHJlcXVlc3QKICAgICAqIEBwYXJhbSAgaW50ICAkaWQKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gdXBkYXRlKFJlcXVlc3QgJHJlcXVlc3QsICRpZCkKICAgIHsKICAgICAgICRpbnB1dCA9ICRyZXF1ZXN0LT5hbGwoKTsKICAgICAgICAkZGF0YT1TdWJTdWJNZW51OjpmaW5kT3JGYWlsKCRpZCk7CiAgICAgICAgCiAgICAgICAgJHZhbGlkYXRvciA9IFZhbGlkYXRvcjo6bWFrZSgkaW5wdXQsIFsKICAgICAgICAgICAgICAgICAgICAnbmFtZScgICAgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgICAgICAgICAndXJsJyAgICA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAgICAgICAgICdpY29uJyA9PiAnbWltZXM6anBlZyxqcGcsYm1wLHBuZycKICAgICAgICAgICAgICAgIF0pOwogICAgICAgIAogICAgICAgICAgICAgICAgaWYgKCR2YWxpZGF0b3ItPmZhaWxzKCkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVkaXJlY3QoKS0+YmFjaygpLT53aXRoRXJyb3JzKCR2YWxpZGF0b3IpLT53aXRoSW5wdXQoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgdHJ5ewoKICAgICAgICAgICAgJGlucHV0WydzbHVnJ109anNvbl9lbmNvZGUoJHJlcXVlc3QtPnNsdWcpOwoKICAgICAgICAgICAgaWYgKCRyZXF1ZXN0LT5oYXNGaWxlKCdpY29uJykpewogICAgICAgICAgICAgICAgJGlucHV0WydpY29uJ109TXlIZWxwZXI6OnBob3RvVXBsb2FkKCRyZXF1ZXN0LT5maWxlKCdpY29uJyksJ2ltYWdlcy9tZW51L3N1Yi1zdWItbWVudS9pY29uLycsMzIpOwogICAgICAgICAgICAgICAgJGlucHV0WydiaWdfaWNvbiddPU15SGVscGVyOjpwaG90b1VwbG9hZCgkcmVxdWVzdC0+ZmlsZSgnaWNvbicpLCdpbWFnZXMvbWVudS9zdWItc3ViLW1lbnUvYmlnLWljb24vJywxMjgpOwogICAgICAgICAgICAgICAgaWYgKGZpbGVfZXhpc3RzKCRkYXRhLT5pY29uKSl7dW5saW5rKCRkYXRhLT5pY29uKTt9CiAgICAgICAgICAgICAgICBpZiAoZmlsZV9leGlzdHMoJGRhdGEtPmJpZ19pY29uKSl7dW5saW5rKCRkYXRhLT5iaWdfaWNvbik7fQogICAgICAgICAgICB9CgogICAgICAgICAgICAkZGF0YS0+dXBkYXRlKCRpbnB1dCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJGJ1Zz0wOwogICAgICAgICAgICB9Y2F0Y2goXEV4Y2VwdGlvbiAkZSl7CiAgICAgICAgICAgICAgICAkYnVnPSRlLT5lcnJvckluZm9bMV07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgIGlmKCRidWc9PTApewogICAgICAgICAgICByZXR1cm4gcmVkaXJlY3QoKS0+YmFjaygpLT53aXRoKCdzdWNjZXNzJywnU3VjY2Vzc2Z1bGx5IFVwZGF0ZScpOwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIHJldHVybiByZWRpcmVjdCgpLT5iYWNrKCktPndpdGgoJ2Vycm9yJywnU29tZXRoaW5nIEVycm9yIEZvdW5kICEgJyk7CiAgICAgICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJlbW92ZSB0aGUgc3BlY2lmaWVkIHJlc291cmNlIGZyb20gc3RvcmFnZS4KICAgICAqCiAgICAgKiBAcGFyYW0gIGludCAgJGlkCiAgICAgKiBAcmV0dXJuIFxJbGx1bWluYXRlXEh0dHBcUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGRlc3Ryb3koJGlkKQogICAgewogICAgICAgIAogICAgICAgICRkYXRhPVN1YlN1Yk1lbnU6OmZpbmRPckZhaWwoJGlkKTsKICAgICAgIHRyeXsKICAgICAgICAgICAgJGRhdGEtPmRlbGV0ZSgpOwogICAgICAgICAgICAkYnVnPTA7CgovLyAgICAgICAgICAgaWYgKGZpbGVfZXhpc3RzKCRkYXRhLT5pY29uKSl7dW5saW5rKCRkYXRhLT5pY29uKTt9Ci8vICAgICAgICAgICBpZiAoZmlsZV9leGlzdHMoJGRhdGEtPmJpZ19pY29uKSl7dW5saW5rKCRkYXRhLT5iaWdfaWNvbik7fQogICAgICAgICAgICAkZXJyb3I9MDsKICAgICAgICB9Y2F0Y2goXEV4Y2VwdGlvbiAkZSl7CiAgICAgICAgICAgICRidWc9JGUtPmVycm9ySW5mb1sxXTsKICAgICAgICAgICAgJGVycm9yPSRlLT5lcnJvckluZm9bMl07CiAgICAgICAgfQogICAgICAgIGlmKCRidWc9PTApewogICAgICAgcmV0dXJuIHJlZGlyZWN0KCktPmJhY2soKS0+d2l0aCgnc3VjY2VzcycsJ1N1Y2Nlc3NmdWxseSBEZWxldGVkIScpOwogICAgICAgIH1lbHNlaWYoJGJ1Zz09MTQ1MSl7CiAgICAgICByZXR1cm4gcmVkaXJlY3QoKS0+YmFjaygpLT53aXRoKCdlcnJvcicsJ1RoaXMgRGF0YSBpcyBVc2VkIGFueXdoZXJlICEgJyk7CgogICAgICAgIH0KICAgICAgICBlbHNlaWYoJGJ1Zz4wKXsKICAgICAgIHJldHVybiByZWRpcmVjdCgpLT5iYWNrKCktPndpdGgoJ2Vycm9yJywnU29tZSB0aGluZyBlcnJvciBmb3VuZCAhJyk7CgogICAgICAgIH0KICAgIH0KfQo=