<?php
bolt_decrypt( __FILE__ , 'Oe3aVb'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcUG1zOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xBcHByb3ZhbFJhbmdlU2V0dXA7CnVzZSBBcHBcVXNlcjsKdXNlIElsbHVtaW5hdGVcSHR0cFxSZXF1ZXN0Owp1c2UgU3BhdGllXFBlcm1pc3Npb25cTW9kZWxzXFJvbGU7CgpjbGFzcyBBcHByb3ZhbFJhbmdlU2V0dXBDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CiAgICAvKioKICAgICAqIERpc3BsYXkgYSBsaXN0aW5nIG9mIHRoZSByZXNvdXJjZS4KICAgICAqCiAgICAgKiBAcmV0dXJuIFxJbGx1bWluYXRlXEh0dHBcUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGluZGV4KCkKICAgIHsKICAgICAgICB0cnkgewogICAgICAgICAgICAkdGl0bGUgPSAnQXBwcm92YWwgUmFuZ2UgU2V0dXAnOwogICAgICAgICAgICAkcmFuZ2VzID0gQXBwcm92YWxSYW5nZVNldHVwOjphbGwoKTsKICAgICAgICAgICAgJHJvbGVzID0gUm9sZTo6YWxsKCk7CgogICAgICAgICAgICByZXR1cm4gdmlldygncG1zLmJhY2tlbmQucGFnZXMuYXBwcm92YWwtcmFuZ2Utc2V0dXAuaW5kZXgnLCBjb21wYWN0KCd0aXRsZScsICdyYW5nZXMnLCAncm9sZXMnKSk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhFcnJvcigkdGgtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogU2hvdyB0aGUgZm9ybSBmb3IgY3JlYXRpbmcgYSBuZXcgcmVzb3VyY2UuCiAgICAgKgogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBjcmVhdGUoUmVxdWVzdCAkcmVxdWVzdCkKICAgIHsKICAgICAgICAkZGF0YSA9IFVzZXI6OmFsbCgpOwogICAgICAgICR1c2VycyA9IFtdOwogICAgICAgIGZvcmVhY2ggKCRkYXRhIGFzICRpdGVtKXsKICAgICAgICAgICAgaWYgKCRpdGVtLT5oYXNSb2xlKCRyZXF1ZXN0LT5uYW1lKSl7CiAgICAgICAgICAgICAgICAkdXNlcnNbXSA9ICRpdGVtOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKCR1c2Vycyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTdG9yZSBhIG5ld2x5IGNyZWF0ZWQgcmVzb3VyY2UgaW4gc3RvcmFnZS4KICAgICAqCiAgICAgKiBAcGFyYW0gIFxJbGx1bWluYXRlXEh0dHBcUmVxdWVzdCAgJHJlcXVlc3QKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc3RvcmUoUmVxdWVzdCAkcmVxdWVzdCkKICAgIHsKICAgICAgICAkdGhpcy0+dmFsaWRhdGUoJHJlcXVlc3QsIFsKICAgICAgICAgICAgJ21pbl9hbW91bnQnID0+IFsncmVxdWlyZWQnLCAnc3RyaW5nJywgJ21pbjoxJ10sCiAgICAgICAgICAgICdtYXhfYW1vdW50JyA9PiBbJ3JlcXVpcmVkJywgJ3N0cmluZycsICdtaW46MSddLAogICAgICAgIF0pOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgICRyYW5nZSA9IG5ldyBBcHByb3ZhbFJhbmdlU2V0dXAoKTsKICAgICAgICAgICAgJHJhbmdlLT5taW5fYW1vdW50ID0gJHJlcXVlc3QtPm1pbl9hbW91bnQ7CiAgICAgICAgICAgICRyYW5nZS0+bWF4X2Ftb3VudCA9ICRyZXF1ZXN0LT5tYXhfYW1vdW50OwogICAgICAgICAgICAkcmFuZ2UtPnNhdmUoKTsKICAgICAgICAgICAgJHJhbmdlLT5yZWxVc2VycygpLT5zeW5jKCRyZXF1ZXN0LT51c2Vycyk7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhTdWNjZXNzKCdTYXZlZCBTdWNjZXNzZnVsbHknKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aEVycm9yKCR0aC0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBEaXNwbGF5IHRoZSBzcGVjaWZpZWQgcmVzb3VyY2UuCiAgICAgKgogICAgICogQHBhcmFtICBpbnQgICRpZAogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBzaG93KEFwcHJvdmFsUmFuZ2VTZXR1cCAkcmFuZ2VTZXR1cCkKICAgIHsKICAgICAgICAkcmFuZ2VTZXR1cC0+dXNlcnMgPSBbXTsKICAgICAgICAkcm9sZSA9IFtdOwogICAgICAgIGZvcmVhY2ggKCRyYW5nZVNldHVwLT5yZWxVc2VycyBhcyAkdXNlcil7CiAgICAgICAgICAgIGZvcmVhY2ggKCR1c2VyLT5yb2xlcy0+cGx1Y2soJ25hbWUnKSBhcyAkaXRlbSl7CiAgICAgICAgICAgICAgICBhcnJheV9wdXNoKCRyb2xlLCRpdGVtKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAkcmFuZ2VTZXR1cC0+cm9sZSA9IGFycmF5X3VuaXF1ZSgkcm9sZSlbMF07CiAgICAgICAgJG91dHB1dCA9ICR0aGlzLT5lZGl0Rm9ybSgkcmFuZ2VTZXR1cCk7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oJG91dHB1dCk7CiAgICB9CgogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIGVkaXRGb3JtKCRyYW5nZVNldHVwKQogICAgewogICAgICAgICRyb2xlUm93ID0gW107CiAgICAgICAgJHNSb2xlID0gJyc7CiAgICAgICAgZm9yZWFjaCAoUm9sZTo6YWxsKCkgYXMgJHJvbGUpewogICAgICAgICAgICBpZiAoJHJvbGUtPm5hbWUgPT09ICRyYW5nZVNldHVwLT5yb2xlKXsKICAgICAgICAgICAgICAgICRzUm9sZSA9ICRyb2xlOwogICAgICAgICAgICAgICAgYXJyYXlfcHVzaCgkcm9sZVJvdywnPG9wdGlvbiBzZWxlY3RlZD4nLiRyb2xlLT5uYW1lLic8L29wdGlvbj4nKTsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBhcnJheV9wdXNoKCRyb2xlUm93LCc8b3B0aW9uPicuJHJvbGUtPm5hbWUuJzwvb3B0aW9uPicpOwogICAgICAgICAgICB9CgogICAgICAgIH0KCiAgICAgICAgJG9wdCA9IFtdOwogICAgICAgIGZvcmVhY2ggKCRyYW5nZVNldHVwLT5yZWxVc2VycyBhcyAkcmVsVXNlcil7CiAgICAgICAgICAgICRvcHQgW10gPSAkcmVsVXNlci0+aWQ7CiAgICAgICAgfQoKICAgICAgICAkZGF0YSA9IFVzZXI6OmFsbCgpOwogICAgICAgICR1c2VycyA9IFtdOwogICAgICAgIGZvcmVhY2ggKCRkYXRhIGFzICRpdGVtKXsKICAgICAgICAgICAgaWYgKCRpdGVtLT5oYXNSb2xlKCRzUm9sZS0+bmFtZSkpewogICAgICAgICAgICAgICAgJHVzZXJzW10gPSAnPG9wdGlvbiAnLihpbl9hcnJheSgkaXRlbS0+aWQsJG9wdCk/J3NlbGVjdGVkJzonJykuJyB2YWx1ZT0iJy4kaXRlbS0+aWQuJyI+Jy4kaXRlbS0+bmFtZS4nPC9vcHRpb24+JzsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgJG91dHB1dCA9ICc8Zm9ybSBhY3Rpb249Iicucm91dGUoJ3Btcy5yYW5nZS1zZXR1cC51cGRhdGUnLCRyYW5nZVNldHVwLT5pZCkuJyIgbWV0aG9kPSJwb3N0Ij4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJfdG9rZW4iIHZhbHVlPSInLmNzcmZfdG9rZW4oKS4nIj4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJfbWV0aG9kIiB2YWx1ZT0icHV0Ij4KICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItMSBmb250LXdlaWdodC1ib2xkIj48bGFiZWwgZm9yPSJtaW5BbW91bnQiPjxzdHJvbmc+Jy5fXygnRnJvbSBBbW91bnQnKS4nPHNwYW4gY2xhc3M9InRleHQtZGFuZ2VyIj4mbmJzcDsqPC9zcGFuPjwvc3Ryb25nPjwvbGFiZWw+PC9wPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImlucHV0LWdyb3VwIGlucHV0LWdyb3VwLW1kIG1iLTMgZC0iPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBtaW49IjEiIG9ua2V5cHJlc3M9ImlmKHRoaXMudmFsdWUubGVuZ3RoPT05KSByZXR1cm4gZmFsc2U7IiAgbmFtZT0ibWluX2Ftb3VudCIgaWQ9Im1pbkFtb3VudCIgY2xhc3M9ImZvcm0tY29udHJvbCByb3VuZGVkIiBhcmlhLWxhYmVsPSJMYXJnZSIgcGxhY2Vob2xkZXI9IicuX18oJ1N0YXJ0IGZyb20gJykuJyIgYXJpYS1kZXNjcmliZWRieT0iaW5wdXRHcm91cC1zaXppbmctc20iIHJlcXVpcmVkIHZhbHVlPSInLiRyYW5nZVNldHVwLT5taW5fYW1vdW50LiciPgoKICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTEgZm9udC13ZWlnaHQtYm9sZCI+PGxhYmVsIGZvcj0ibWF4QW1vdW50Ij48c3Ryb25nPicuX18oJ1RvIEFtb3VudCcpLic8c3BhbiBjbGFzcz0idGV4dC1kYW5nZXIiPiZuYnNwOyo8L3NwYW4+PC9zdHJvbmc+PC9sYWJlbD4gPC9wPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImlucHV0LWdyb3VwIGlucHV0LWdyb3VwLW1kIG1iLTMgZC0iPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBtaW49IjEiIG9ua2V5cHJlc3M9ImlmKHRoaXMudmFsdWUubGVuZ3RoPT05KSByZXR1cm4gZmFsc2U7IiAgbmFtZT0ibWF4X2Ftb3VudCIgaWQ9Im1heEFtb3VudCIgY2xhc3M9ImZvcm0tY29udHJvbCByb3VuZGVkIiBhcmlhLWxhYmVsPSJMYXJnZSIgcGxhY2Vob2xkZXI9IicuX18oJ0VuZCB0bycpLiciIGFyaWEtZGVzY3JpYmVkYnk9ImlucHV0R3JvdXAtc2l6aW5nLXNtIiByZXF1aXJlZCB2YWx1ZT0iJy4kcmFuZ2VTZXR1cC0+bWF4X2Ftb3VudC4nIj4KCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi0xIGZvbnQtd2VpZ2h0LWJvbGQiPjxsYWJlbCBmb3I9InJvbGUiPjxzdHJvbmc+Jy5fXygnUm9sZXMnKS4nPHNwYW4gY2xhc3M9InRleHQtZGFuZ2VyIj4mbmJzcDsqPC9zcGFuPjwvc3Ryb25nPjwvbGFiZWw+PC9wPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlbGVjdC1zZWFyY2gtZ3JvdXAgaW5wdXQtZ3JvdXAgaW5wdXQtZ3JvdXAtbWQgbWItMyBkLSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0icm9sZSIgaWQ9InJvbGUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHJlcXVpcmVkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+Jy5fXygnU2VsZWN0IE9uZScpLic8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICcuaW1wbG9kZSgnLCcsJHJvbGVSb3cpLicKICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi0xIGZvbnQtd2VpZ2h0LWJvbGQiPjxsYWJlbCBmb3I9InVzZXJzIj48c3Ryb25nPicuX18oJ1VzZXJzJykuJzxzcGFuIGNsYXNzPSJ0ZXh0LWRhbmdlciI+Jm5ic3A7Kjwvc3Bhbj48L3N0cm9uZz48L2xhYmVsPiA8L3A+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2VsZWN0LXNlYXJjaC1ncm91cCBpbnB1dC1ncm91cCBpbnB1dC1ncm91cC1tZCBtYi0zIGQtIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJ1c2Vyc1tdIiBpZD0idXNlcnMiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHJlcXVpcmVkIG11bHRpcGxlPicuaW1wbG9kZSgnLCcsICR1c2VycykuJzwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9mb3JtPic7CiAgICAgICAgcmV0dXJuICRvdXRwdXQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBTaG93IHRoZSBmb3JtIGZvciBlZGl0aW5nIHRoZSBzcGVjaWZpZWQgcmVzb3VyY2UuCiAgICAgKgogICAgICogQHBhcmFtICBpbnQgICRpZAogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBlZGl0KCRpZCkKICAgIHsKICAgICAgICAvLwogICAgfQoKICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBzcGVjaWZpZWQgcmVzb3VyY2UgaW4gc3RvcmFnZS4KICAgICAqCiAgICAgKiBAcGFyYW0gIFxJbGx1bWluYXRlXEh0dHBcUmVxdWVzdCAgJHJlcXVlc3QKICAgICAqIEBwYXJhbSAgaW50ICAkaWQKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gdXBkYXRlKFJlcXVlc3QgJHJlcXVlc3QsIEFwcHJvdmFsUmFuZ2VTZXR1cCAkcmFuZ2VTZXR1cCkKICAgIHsKICAgICAgICAkdGhpcy0+dmFsaWRhdGUoJHJlcXVlc3QsIFsKICAgICAgICAgICAgJ21pbl9hbW91bnQnID0+IFsncmVxdWlyZWQnLCAnc3RyaW5nJywgJ21pbjoxJ10sCiAgICAgICAgICAgICdtYXhfYW1vdW50JyA9PiBbJ3JlcXVpcmVkJywgJ3N0cmluZycsICdtaW46MSddLAogICAgICAgIF0pOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgICRyYW5nZSA9ICRyYW5nZVNldHVwOwogICAgICAgICAgICAkcmFuZ2UtPm1pbl9hbW91bnQgPSAkcmVxdWVzdC0+bWluX2Ftb3VudDsKICAgICAgICAgICAgJHJhbmdlLT5tYXhfYW1vdW50ID0gJHJlcXVlc3QtPm1heF9hbW91bnQ7CiAgICAgICAgICAgICRyYW5nZS0+c2F2ZSgpOwogICAgICAgICAgICAkcmFuZ2UtPnJlbFVzZXJzKCktPnN5bmMoJHJlcXVlc3QtPnVzZXJzKTsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aFN1Y2Nlc3MoJ1VwZGF0ZWQgU3VjY2Vzc2Z1bGx5Jyk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhFcnJvcigkdGgtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmVtb3ZlIHRoZSBzcGVjaWZpZWQgcmVzb3VyY2UgZnJvbSBzdG9yYWdlLgogICAgICoKICAgICAqIEBwYXJhbSAgaW50ICAkaWQKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZGVzdHJveShBcHByb3ZhbFJhbmdlU2V0dXAgJHJhbmdlU2V0dXApCiAgICB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJHJhbmdlU2V0dXAtPnJlbFVzZXJzKCktPnN5bmMoW10pOwogICAgICAgICAgICAkcmFuZ2VTZXR1cC0+ZGVsZXRlKCk7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhTdWNjZXNzKCdEZWxldGVkIFN1Y2Nlc3NmdWxseScpOwogICAgICAgIH1jYXRjaCAoXFRocm93YWJsZSAkdGgpewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmJhY2tXaXRoRXJyb3IoJHRoLT5nZXRNZXNzYWdlKCkpOwogICAgICAgIH0KICAgIH0KfQo=