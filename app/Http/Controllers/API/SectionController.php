<?php
bolt_decrypt( __FILE__ , 'i7N4mq'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcQVBJOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKdXNlIERCOwoKdXNlIEFwcFxNb2RlbHNcSHJcVW5pdDsKdXNlIEFwcFxNb2RlbHNcSHJcRGVwYXJ0bWVudDsKdXNlIEFwcFxNb2RlbHNcSHJcU2VjdGlvbjsKdXNlIEFwcFxNb2RlbHNcSHJcTG9jYXRpb247CnVzZSBBcHBcTW9kZWxzXEhyXERlc2lnbmF0aW9uOwp1c2UgQXBwXE1vZGVsc1xFbXBsb3llZTsKCmNsYXNzIFNlY3Rpb25Db250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CiAgICAvKioKICAgICAqIExpc3Qgb2YgU2VjdGlvbnMKICAgICAqIAogICAgICogR2V0IHRoZSBsaXN0IG9mIGF2YWlsYWJsZSBzZWN0aW9ucy4KICAgICAqIAogICAgICogQHF1ZXJ5UGFyYW0gdG9rZW4gc3RyaW5nIHJlcXVpcmVkIEF1dGhlbnRpY2F0aW9uIFRva2VuIExpc3Qgd291bGQgYmUgcHJvdmlkZWQgYnkgQklaWlNPTCBFeGFtcGxlOiBhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5emFiY2RlZgogICAgICogCiAgICAgKiBAZ3JvdXAgU2VjdGlvbgogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBpbmRleChSZXF1ZXN0ICRyZXF1ZXN0KXsKICAgICAgICB0cnl7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiB0cnVlLAogICAgICAgICAgICAgICAgJ3N0YXR1cycgPT4gdHJ1ZSwKICAgICAgICAgICAgICAgICdzdGF0dXNfY29kZScgPT4gMjAwLAogICAgICAgICAgICAgICAgJ2RhdGEnID0+IFsKICAgICAgICAgICAgICAgICAgICAnc2VjdGlvbnMnID0+IFNlY3Rpb246OmpvaW4oJ2hyX2RlcGFydG1lbnQnLCAnaHJfZGVwYXJ0bWVudC5ocl9kZXBhcnRtZW50X2lkJywgJz0nLCAnaHJfc2VjdGlvbi5ocl9zZWN0aW9uX2RlcGFydG1lbnRfaWQnKQogICAgICAgICAgICAgICAgICAgIC0+am9pbignaHJfdW5pdCcsICdocl91bml0LmhyX3VuaXRfaWQnLCAnPScsICdocl9kZXBhcnRtZW50LmhyX3VuaXRfaWQnKQogICAgICAgICAgICAgICAgICAgIC0+am9pbignY29tcGFuaWVzJywgJ2NvbXBhbmllcy5pZCcsICc9JywgJ2hyX3VuaXQuY29tcGFueV9pZCcpCgogICAgICAgICAgICAgICAgICAgIC0+d2hlbigkcmVxdWVzdC0+Z2V0KCdkZXBhcnRtZW50X2lkJykgPiAwLCBmdW5jdGlvbigkcXVlcnkpIHVzZSgkcmVxdWVzdCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCdocl9zZWN0aW9uX2RlcGFydG1lbnRfaWQnLCAkcmVxdWVzdC0+Z2V0KCdkZXBhcnRtZW50X2lkJykpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLT5nZXQoWwogICAgICAgICAgICAgICAgICAgICAgREI6OnJhdygnaHJfc2VjdGlvbi5ocl9zZWN0aW9uX2lkIGFzIGlkJyksCiAgICAgICAgICAgICAgICAgICAgICBEQjo6cmF3KCdocl9zZWN0aW9uLmhyX3NlY3Rpb25fY29kZSBhcyBjb2RlJyksCiAgICAgICAgICAgICAgICAgICAgICBEQjo6cmF3KCdocl9zZWN0aW9uLmhyX3NlY3Rpb25fbmFtZSBhcyBuYW1lJyksCgogICAgICAgICAgICAgICAgICAgICAgREI6OnJhdygnaHJfZGVwYXJ0bWVudC5ocl9kZXBhcnRtZW50X2lkIGFzIGRlcGFydG1lbnRfaWQnKSwKICAgICAgICAgICAgICAgICAgICAgIERCOjpyYXcoJ2hyX2RlcGFydG1lbnQuaHJfZGVwYXJ0bWVudF9uYW1lIGFzIGRlcGFydG1lbnRfbmFtZScpLAoKICAgICAgICAgICAgICAgICAgICAgIERCOjpyYXcoJ2hyX3VuaXQuaHJfdW5pdF9jb2RlIGFzIHVuaXRfY29kZScpLAogICAgICAgICAgICAgICAgICAgICAgREI6OnJhdygnaHJfdW5pdC5ocl91bml0X25hbWUgYXMgdW5pdF9uYW1lJyksCgogICAgICAgICAgICAgICAgICAgICAgREI6OnJhdygnY29tcGFuaWVzLmNvZGUgYXMgY29tcGFueV9jb2RlJyksCiAgICAgICAgICAgICAgICAgICAgICBEQjo6cmF3KCdjb21wYW5pZXMubmFtZSBhcyBjb21wYW55X25hbWUnKSwKICAgICAgICAgICAgICAgICAgICBdKSwKICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgXSwgMjAwKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IGZhbHNlLAogICAgICAgICAgICAgICAgJ3N0YXR1cycgPT4gZmFsc2UsCiAgICAgICAgICAgICAgICAnc3RhdHVzX2NvZGUnID0+IDUwMCwKICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkdGgtPmdldE1lc3NhZ2UoKQogICAgICAgICAgICBdLCA1MDApOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFN0b3JlIFNlY3Rpb24KICAgICAqIAogICAgICogU3RvcmUgYSBuZXcgU2VjdGlvbi4KICAgICAqIAogICAgICogQHF1ZXJ5UGFyYW0gdG9rZW4gc3RyaW5nIHJlcXVpcmVkIEF1dGhlbnRpY2F0aW9uIFRva2VuIExpc3Qgd291bGQgYmUgcHJvdmlkZWQgYnkgQklaWlNPTCBFeGFtcGxlOiBhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5emFiY2RlZgogICAgICogQGJvZHlQYXJhbSBkZXBhcnRtZW50X2lkIGludCByZXF1aXJlZCBkZXBhcnRtZW50X2lkIG9mIHRoZSBTZWN0aW9uIEV4YW1wbGU6IDAKICAgICAqIEBib2R5UGFyYW0gY29kZSBzdHJpbmcgcmVxdWlyZWQgQ29kZSBvZiB0aGUgU2VjdGlvbiBFeGFtcGxlOiBJQ1QKICAgICAqIEBib2R5UGFyYW0gbmFtZSBzdHJpbmcgcmVxdWlyZWQgTmFtZSBvZiB0aGUgU2VjdGlvbiBFeGFtcGxlOiBJbmZvcm1hdGlvbiBUZWNobm9sb2d5CiAgICAgKgogICAgICogQHJlc3BvbnNlIHsKICAgICAqICAgICAgICJzdWNjZXNzIjogdHJ1ZSwKICAgICAqICAgICAgICJzdGF0dXMiOiB0cnVlLAogICAgICogICAgICAgInN1Y2Nlc3NfY29kZSI6IDIwMCwKICAgICAqICAgICAgICJkYXRhIjogewogICAgICogICAgICAgICAgICJtZXNzYWdlIjogIlNlY3Rpb24gaGFzIGJlZW4gc3RvcmVkIHN1Y2Nlc3NmdWxseS4iCiAgICAgKiAgICAgICB9CiAgICAgKiAgIH0KICAgICAqIAogICAgICogQGdyb3VwIFNlY3Rpb24KICAgICAqIEBwYXJhbSAgXElsbHVtaW5hdGVcSHR0cFxSZXF1ZXN0ICAkcmVxdWVzdAogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBzdG9yZShSZXF1ZXN0ICRyZXF1ZXN0KQogICAgewogICAgICAgICR2YWxpZGF0b3IgPSBcVmFsaWRhdG9yOjptYWtlKCRyZXF1ZXN0LT5hbGwoKSwgWwogICAgICAgICAgICAnY29kZScgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ25hbWUnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICdkZXBhcnRtZW50X2lkJyA9PiAncmVxdWlyZWQnLAogICAgICAgIF0pOwoKICAgICAgICBpZiAoJHZhbGlkYXRvci0+cGFzc2VzKCkpIHsKICAgICAgICAgICAgREI6OmJlZ2luVHJhbnNhY3Rpb24oKTsKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgU2VjdGlvbjo6Y3JlYXRlKFsKICAgICAgICAgICAgICAgICAgICAnaHJfc2VjdGlvbl9kZXBhcnRtZW50X2lkJyA9PiAkcmVxdWVzdC0+ZGVwYXJ0bWVudF9pZCwKICAgICAgICAgICAgICAgICAgICAnaHJfc2VjdGlvbl9jb2RlJyA9PiAkcmVxdWVzdC0+Y29kZSwKICAgICAgICAgICAgICAgICAgICAnaHJfc2VjdGlvbl9uYW1lJyA9PiAkcmVxdWVzdC0+bmFtZSwKICAgICAgICAgICAgICAgICAgICAnaHJfc2VjdGlvbl9uYW1lX2JuJyA9PiAkcmVxdWVzdC0+bmFtZSwKICAgICAgICAgICAgICAgIF0pOwoKICAgICAgICAgICAgICAgIERCOjpjb21taXQoKTsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAnc3RhdHVzJyA9PiB0cnVlLAogICAgICAgICAgICAgICAgICAgICdzdGF0dXNfY29kZScgPT4gMjAwLAogICAgICAgICAgICAgICAgICAgICdkYXRhJyA9PiBbCiAgICAgICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAiU2VjdGlvbiBoYXMgYmVlbiBzdG9yZWQgc3VjY2Vzc2Z1bGx5LiIKICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICBdLCAyMDApOwogICAgICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgICAgIERCOjpyb2xsYmFjaygpOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAnc3RhdHVzJyA9PiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAnc3RhdHVzX2NvZGUnID0+IDUwMCwKICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gJHRoLT5nZXRNZXNzYWdlKCkKICAgICAgICAgICAgICAgIF0sIDUwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IGZhbHNlLAogICAgICAgICAgICAnc3RhdHVzJyA9PiBmYWxzZSwKICAgICAgICAgICAgJ3N0YXR1c19jb2RlJyA9PiA0MjIsCiAgICAgICAgICAgICdlcnJvcnMnID0+ICR2YWxpZGF0b3ItPmVycm9ycygpLT5hbGwoKQogICAgICAgIF0sIDQyMik7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZWN0aW9uIERldGFpbHMKICAgICAqIAogICAgICogR2V0IFNlY3Rpb24gYnkgaXQncyB1bmlxdWUgSUQuCiAgICAgKiAKICAgICAqIEBxdWVyeVBhcmFtIHRva2VuIHN0cmluZyByZXF1aXJlZCBBdXRoZW50aWNhdGlvbiBUb2tlbiBMaXN0IHdvdWxkIGJlIHByb3ZpZGVkIGJ5IEJJWlpTT0wgRXhhbXBsZTogYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXphYmNkZWYKICAgICAqIEBwYXRoUGFyYW0gc2VjdGlvbl9pZCBpbnQgcmVxdWlyZWQgSUQgb2YgdGhlIFNlY3Rpb24gRXhhbXBsZTogMTAwCiAgICAgKiAKICAgICAqIEBncm91cCBTZWN0aW9uCiAgICAgKiBAcGFyYW0gIGludCAgJGlkCiAgICAgKiBAcmV0dXJuIFxJbGx1bWluYXRlXEh0dHBcUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHNob3coU2VjdGlvbiAkc2VjdGlvbikKICAgIHsKICAgICAgICB0cnl7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiB0cnVlLAogICAgICAgICAgICAgICAgJ3N0YXR1cycgPT4gdHJ1ZSwKICAgICAgICAgICAgICAgICdzdGF0dXNfY29kZScgPT4gMjAwLAogICAgICAgICAgICAgICAgJ2RhdGEnID0+IFsKICAgICAgICAgICAgICAgICAgICAnc2VjdGlvbicgPT4gWwogICAgICAgICAgICAgICAgICAgICAgJ2lkJyA9PiAkc2VjdGlvbi0+aHJfc2VjdGlvbl9pZCwKICAgICAgICAgICAgICAgICAgICAgICdjb2RlJyA9PiAkc2VjdGlvbi0+aHJfc2VjdGlvbl9jb2RlLAogICAgICAgICAgICAgICAgICAgICAgJ25hbWUnID0+ICRzZWN0aW9uLT5ocl9zZWN0aW9uX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAnZGVwYXJ0bWVudF9pZCcgPT4gJHNlY3Rpb24tPmRlcGFydG1lbnQtPmhyX2RlcGFydG1lbnRfaWQsCiAgICAgICAgICAgICAgICAgICAgICAnZGVwYXJ0bWVudF9uYW1lJyA9PiAkc2VjdGlvbi0+ZGVwYXJ0bWVudC0+aHJfZGVwYXJ0bWVudF9uYW1lLAogICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgXSwgMjAwKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IGZhbHNlLAogICAgICAgICAgICAgICAgJ3N0YXR1cycgPT4gZmFsc2UsCiAgICAgICAgICAgICAgICAnc3RhdHVzX2NvZGUnID0+IDUwMCwKICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkdGgtPmdldE1lc3NhZ2UoKQogICAgICAgICAgICBdLCA1MDApOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFVwZGF0ZSBTZWN0aW9uCiAgICAgKiAKICAgICAqIFVwZGF0ZSBhbiBhdmFpbGFibGUgU2VjdGlvbi4KICAgICAqIAogICAgICogQHF1ZXJ5UGFyYW0gdG9rZW4gc3RyaW5nIHJlcXVpcmVkIEF1dGhlbnRpY2F0aW9uIFRva2VuIExpc3Qgd291bGQgYmUgcHJvdmlkZWQgYnkgQklaWlNPTCBFeGFtcGxlOiBhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5emFiY2RlZgogICAgICogQGJvZHlQYXJhbSBkZXBhcnRtZW50X2lkIGludCByZXF1aXJlZCBkZXBhcnRtZW50X2lkIG9mIHRoZSBTZWN0aW9uIEV4YW1wbGU6IDAKICAgICAqIEBib2R5UGFyYW0gY29kZSBzdHJpbmcgcmVxdWlyZWQgQ29kZSBvZiB0aGUgU2VjdGlvbiBFeGFtcGxlOiBJQ1QKICAgICAqIEBib2R5UGFyYW0gbmFtZSBzdHJpbmcgcmVxdWlyZWQgTmFtZSBvZiB0aGUgU2VjdGlvbiBFeGFtcGxlOiBJbmZvcm1hdGlvbiBUZWNobm9sb2d5CiAgICAgKgogICAgICogQHJlc3BvbnNlIHsKICAgICAqICAgICAgICJzdWNjZXNzIjogdHJ1ZSwKICAgICAqICAgICAgICJzdGF0dXMiOiB0cnVlLAogICAgICogICAgICAgInN1Y2Nlc3NfY29kZSI6IDIwMCwKICAgICAqICAgICAgICJkYXRhIjogewogICAgICogICAgICAgICAgICJtZXNzYWdlIjogIlNlY3Rpb24gaGFzIGJlZW4gdXBkYXRlZCBzdWNjZXNzZnVsbHkuIgogICAgICogICAgICAgfQogICAgICogICB9CiAgICAgKiAKICAgICAqIEBncm91cCBTZWN0aW9uCiAgICAgKiBAcGFyYW0gIFxJbGx1bWluYXRlXEh0dHBcUmVxdWVzdCAgJHJlcXVlc3QKICAgICAqIEBwYXJhbSAgaW50ICAkaWQKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gdXBkYXRlKFJlcXVlc3QgJHJlcXVlc3QsICRpZCkKICAgIHsKICAgICAgICAkdmFsaWRhdG9yID0gXFZhbGlkYXRvcjo6bWFrZSgkcmVxdWVzdC0+YWxsKCksIFsKICAgICAgICAgICAgJ2NvZGUnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICduYW1lJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAnZGVwYXJ0bWVudF9pZCcgPT4gJ3JlcXVpcmVkJywKICAgICAgICBdKTsKCiAgICAgICAgaWYgKCR2YWxpZGF0b3ItPnBhc3NlcygpKSB7CiAgICAgICAgICAgIERCOjpiZWdpblRyYW5zYWN0aW9uKCk7CiAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgIFNlY3Rpb246OnVwZGF0ZU9yQ3JlYXRlKFsKICAgICAgICAgICAgICAgICAgICAnaHJfc2VjdGlvbl9pZCcgPT4gJGlkCiAgICAgICAgICAgICAgICBdLFsKICAgICAgICAgICAgICAgICAgICAnaHJfc2VjdGlvbl9kZXBhcnRtZW50X2lkJyA9PiAkcmVxdWVzdC0+ZGVwYXJ0bWVudF9pZCwKICAgICAgICAgICAgICAgICAgICAnaHJfc2VjdGlvbl9jb2RlJyA9PiAkcmVxdWVzdC0+Y29kZSwKICAgICAgICAgICAgICAgICAgICAnaHJfc2VjdGlvbl9uYW1lJyA9PiAkcmVxdWVzdC0+bmFtZSwKICAgICAgICAgICAgICAgICAgICAnaHJfc2VjdGlvbl9uYW1lX2JuJyA9PiAkcmVxdWVzdC0+bmFtZSwKICAgICAgICAgICAgICAgIF0pOwoKICAgICAgICAgICAgICAgIERCOjpjb21taXQoKTsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAnc3RhdHVzJyA9PiB0cnVlLAogICAgICAgICAgICAgICAgICAgICdzdGF0dXNfY29kZScgPT4gMjAwLAogICAgICAgICAgICAgICAgICAgICdkYXRhJyA9PiBbCiAgICAgICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAiU2VjdGlvbiBoYXMgYmVlbiB1cGRhdGVkIHN1Y2Nlc3NmdWxseS4iCiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgXSwgMjAwKTsKICAgICAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgICAgICBEQjo6cm9sbGJhY2soKTsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgJ3N0YXR1cycgPT4gZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgJ3N0YXR1c19jb2RlJyA9PiA1MDAsCiAgICAgICAgICAgICAgICAgICAgJ21lc3NhZ2UnID0+ICR0aC0+Z2V0TWVzc2FnZSgpCiAgICAgICAgICAgICAgICBdLCA1MDApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICdzdWNjZXNzJyA9PiBmYWxzZSwKICAgICAgICAgICAgJ3N0YXR1cycgPT4gZmFsc2UsCiAgICAgICAgICAgICdzdGF0dXNfY29kZScgPT4gNDIyLAogICAgICAgICAgICAnZXJyb3JzJyA9PiAkdmFsaWRhdG9yLT5lcnJvcnMoKS0+YWxsKCkKICAgICAgICBdLCA0MjIpOwogICAgfQoKICAgIC8qKgogICAgICogRGVsZXRlIFNlY3Rpb24KICAgICAqIAogICAgICogRGVsZXRlIGFuIGF2YWlsYWJsZSBTZWN0aW9uLgogICAgICogCiAgICAgKiBAcXVlcnlQYXJhbSB0b2tlbiBzdHJpbmcgcmVxdWlyZWQgQXV0aGVudGljYXRpb24gVG9rZW4gTGlzdCB3b3VsZCBiZSBwcm92aWRlZCBieSBCSVpaU09MIEV4YW1wbGU6IGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6YWJjZGVmCiAgICAgKiBAcGF0aFBhcmFtIHNlY3Rpb25faWQgaW50IHJlcXVpcmVkIFVuaXF1ZSBJRCBvZiB0aGUgU2VjdGlvbiBFeGFtcGxlOiAxMDAKICAgICAqCiAgICAgKiBAcmVzcG9uc2UgewogICAgICogICAgICAgInN1Y2Nlc3MiOiB0cnVlLAogICAgICogICAgICAgInN0YXR1cyI6IHRydWUsCiAgICAgKiAgICAgICAic3VjY2Vzc19jb2RlIjogMjAwLAogICAgICogICAgICAgImRhdGEiOiB7CiAgICAgKiAgICAgICAgICAgIm1lc3NhZ2UiOiAiU2VjdGlvbiBoYXMgYmVlbiBEZWxldGVkIHN1Y2Nlc3NmdWxseS4iCiAgICAgKiAgICAgICB9CiAgICAgKiAgIH0KICAgICAqIAogICAgICogQGdyb3VwIFNlY3Rpb24KICAgICAqIEBwYXJhbSAgaW50ICAkaWQKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZGVzdHJveSgkaWQpCiAgICB7CiAgICAgICAgREI6OmJlZ2luVHJhbnNhY3Rpb24oKTsKICAgICAgICB0cnl7CiAgICAgICAgICAgIFNlY3Rpb246OndoZXJlKCdocl9zZWN0aW9uX2lkJywgJGlkKS0+ZGVsZXRlKCk7CgogICAgICAgICAgICBEQjo6Y29tbWl0KCk7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiB0cnVlLAogICAgICAgICAgICAgICAgJ3N0YXR1cycgPT4gdHJ1ZSwKICAgICAgICAgICAgICAgICdzdGF0dXNfY29kZScgPT4gMjAwLAogICAgICAgICAgICAgICAgJ2RhdGEnID0+IFsKICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gIlNlY3Rpb24gaGFzIGJlZW4gZGVsZXRlZCBzdWNjZXNzZnVsbHkuIgogICAgICAgICAgICAgICAgXQogICAgICAgICAgICBdLCAyMDApOwogICAgICAgIH1jYXRjaCAoXFRocm93YWJsZSAkdGgpewogICAgICAgICAgICBEQjo6cm9sbGJhY2soKTsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IGZhbHNlLAogICAgICAgICAgICAgICAgJ3N0YXR1cycgPT4gZmFsc2UsCiAgICAgICAgICAgICAgICAnc3RhdHVzX2NvZGUnID0+IDUwMCwKICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkdGgtPmdldE1lc3NhZ2UoKQogICAgICAgICAgICBdLCA1MDApOwogICAgICAgIH0KICAgIH0KfQo=