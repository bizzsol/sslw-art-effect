<?php
bolt_decrypt( __FILE__ , '1MYNcx'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcQVBJOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKdXNlIERCOwoKdXNlIEFwcFxNb2RlbHNcSHJcVW5pdDsKdXNlIEFwcFxNb2RlbHNcSHJcRGVwYXJ0bWVudDsKdXNlIEFwcFxNb2RlbHNcSHJcU2VjdGlvbjsKdXNlIEFwcFxNb2RlbHNcSHJcTG9jYXRpb247CnVzZSBBcHBcTW9kZWxzXEhyXERlc2lnbmF0aW9uOwp1c2UgQXBwXE1vZGVsc1xFbXBsb3llZTsKCmNsYXNzIExvY2F0aW9uQ29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIKewogICAgLyoqCiAgICAgKiBMaXN0IG9mIExvY2F0aW9ucwogICAgICogCiAgICAgKiBHZXQgTGlzdCBvZiBhbGwgYXZhaWxhYmxlIExvY2F0aW9ucy4KICAgICAqIAogICAgICogQHF1ZXJ5UGFyYW0gdG9rZW4gc3RyaW5nIHJlcXVpcmVkIEF1dGhlbnRpY2F0aW9uIFRva2VuIExpc3Qgd291bGQgYmUgcHJvdmlkZWQgYnkgQklaWlNPTCBFeGFtcGxlOiBhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5emFiY2RlZgogICAgICoKICAgICAqIEBncm91cCBMb2NhdGlvbgogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBpbmRleChSZXF1ZXN0ICRyZXF1ZXN0KXsKICAgICAgICB0cnl7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiB0cnVlLAogICAgICAgICAgICAgICAgJ2RhdGEnID0+IFsKICAgICAgICAgICAgICAgICAgICAnbG9jYXRpb25zJyA9PiBMb2NhdGlvbjo6am9pbignaHJfdW5pdCcsICdocl91bml0LmhyX3VuaXRfaWQnLCAnPScsICdocl9sb2NhdGlvbi5ocl9sb2NhdGlvbl91bml0X2lkJykKICAgICAgICAgICAgICAgICAgICAtPndoZW4oJHJlcXVlc3QtPmdldCgndW5pdF9pZCcpID4gMCwgZnVuY3Rpb24oJHF1ZXJ5KSB1c2UoJHJlcXVlc3QpewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnaHJfbG9jYXRpb25fdW5pdF9pZCcsICRyZXF1ZXN0LT5nZXQoJ3VuaXRfaWQnKSk7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAtPmdldChbCiAgICAgICAgICAgICAgICAgICAgICBEQjo6cmF3KCdocl9sb2NhdGlvbi5ocl9sb2NhdGlvbl9pZCBhcyBpZCcpLAogICAgICAgICAgICAgICAgICAgICAgREI6OnJhdygnaHJfbG9jYXRpb24uaHJfbG9jYXRpb25fY29kZSBhcyBjb2RlJyksCiAgICAgICAgICAgICAgICAgICAgICBEQjo6cmF3KCdocl9sb2NhdGlvbi5ocl9sb2NhdGlvbl9zaG9ydF9uYW1lIGFzIHNob3J0X25hbWUnKSwKICAgICAgICAgICAgICAgICAgICAgIERCOjpyYXcoJ2hyX2xvY2F0aW9uLmhyX2xvY2F0aW9uX25hbWUgYXMgbmFtZScpLAogICAgICAgICAgICAgICAgICAgICAgREI6OnJhdygnaHJfdW5pdC5ocl91bml0X2lkIGFzIHVuaXRfaWQnKSwKICAgICAgICAgICAgICAgICAgICAgIERCOjpyYXcoJ2hyX3VuaXQuaHJfdW5pdF9uYW1lIGFzIHVuaXRfbmFtZScpLAogICAgICAgICAgICAgICAgICAgIF0pLAogICAgICAgICAgICAgICAgXQogICAgICAgICAgICBdLCAyMDApOwogICAgICAgIH1jYXRjaCAoRXhjZXB0aW9uICRlKXsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IGZhbHNlLAogICAgICAgICAgICAgICAgJ21lc3NhZ2UnID0+ICRlLT5nZXRNZXNzYWdlKCkKICAgICAgICAgICAgXSwgNTAwKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBTdG9yZSBMb2NhdGlvbgogICAgICogCiAgICAgKiBTdG9yZSBhIG5ldyBMb2NhdGlvbi4KICAgICAqIAogICAgICogQHF1ZXJ5UGFyYW0gdG9rZW4gc3RyaW5nIHJlcXVpcmVkIEF1dGhlbnRpY2F0aW9uIFRva2VuIExpc3Qgd291bGQgYmUgcHJvdmlkZWQgYnkgQklaWlNPTCBFeGFtcGxlOiBhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5emFiY2RlZgogICAgICogQGJvZHlQYXJhbSBjb2RlIHN0cmluZyByZXF1aXJlZCBDb2RlIG9mIHRoZSBMb2NhdGlvbiBFeGFtcGxlOiBJQ1QKICAgICAqIEBib2R5UGFyYW0gbmFtZSBzdHJpbmcgcmVxdWlyZWQgTmFtZSBvZiB0aGUgTG9jYXRpb24gRXhhbXBsZTogSW5mb3JtYXRpb24gVGVjaG5vbG9neQogICAgICogQGJvZHlQYXJhbSBzaG9ydF9uYW1lIHN0cmluZyByZXF1aXJlZCBTaG9ydCBOYW1lIG9mIHRoZSBMb2NhdGlvbiBFeGFtcGxlOiAwCiAgICAgKiBAYm9keVBhcmFtIGFkZHJlc3MgdGV4dCByZXF1aXJlZCBBZGRyZXNzIG9mIHRoZSBMb2NhdGlvbiBFeGFtcGxlOiBEaGFrYQogICAgICogQGJvZHlQYXJhbSB1bml0X2lkIGludCByZXF1aXJlZCBVbml0IElEIG9mIHRoZSBMb2NhdGlvbiBFeGFtcGxlOiAxMDAKICAgICAqCiAgICAgKiBAcmVzcG9uc2UgewogICAgICogICAgICAgInN1Y2Nlc3MiOiB0cnVlLAogICAgICogICAgICAgImRhdGEiOiB7CiAgICAgKiAgICAgICAgICAgIm1lc3NhZ2UiOiAiTG9jYXRpb24gaGFzIGJlZW4gc3RvcmVkIHN1Y2Nlc3NmdWxseS4iCiAgICAgKiAgICAgICB9CiAgICAgKiAgIH0KICAgICAqIAogICAgICogQGdyb3VwIExvY2F0aW9uCiAgICAgKiBAcGFyYW0gIFxJbGx1bWluYXRlXEh0dHBcUmVxdWVzdCAgJHJlcXVlc3QKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc3RvcmUoUmVxdWVzdCAkcmVxdWVzdCkKICAgIHsKICAgICAgICAkdmFsaWRhdG9yID0gXFZhbGlkYXRvcjo6bWFrZSgkcmVxdWVzdC0+YWxsKCksIFsKICAgICAgICAgICAgJ2NvZGUnID0+ICdyZXF1aXJlZHx1bmlxdWU6aHJfbG9jYXRpb24saHJfbG9jYXRpb25fY29kZScsCiAgICAgICAgICAgICdzaG9ydF9uYW1lJyA9PiAncmVxdWlyZWR8dW5pcXVlOmhyX2xvY2F0aW9uLGhyX2xvY2F0aW9uX3Nob3J0X25hbWUnLAogICAgICAgICAgICAnbmFtZScgPT4gJ3JlcXVpcmVkfHVuaXF1ZTpocl9sb2NhdGlvbixocl9sb2NhdGlvbl9uYW1lJywKICAgICAgICAgICAgJ2FkZHJlc3MnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICd1bml0X2lkJyA9PiAncmVxdWlyZWQnLAogICAgICAgIF0pOwoKICAgICAgICBpZiAoJHZhbGlkYXRvci0+cGFzc2VzKCkpIHsKICAgICAgICAgICAgREI6OmJlZ2luVHJhbnNhY3Rpb24oKTsKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgTG9jYXRpb246OmNyZWF0ZShbCiAgICAgICAgICAgICAgICAgICAgJ2hyX2xvY2F0aW9uX2NvZGUnID0+ICRyZXF1ZXN0LT5jb2RlLAogICAgICAgICAgICAgICAgICAgICdocl9sb2NhdGlvbl9uYW1lJyA9PiAkcmVxdWVzdC0+bmFtZSwKICAgICAgICAgICAgICAgICAgICAnaHJfbG9jYXRpb25fbmFtZV9ibicgPT4gJHJlcXVlc3QtPm5hbWUsCiAgICAgICAgICAgICAgICAgICAgJ2hyX2xvY2F0aW9uX3Nob3J0X25hbWUnID0+ICRyZXF1ZXN0LT5zaG9ydF9uYW1lLAogICAgICAgICAgICAgICAgICAgICdocl9sb2NhdGlvbl9hZGRyZXNzJyA9PiAkcmVxdWVzdC0+YWRkcmVzcywKICAgICAgICAgICAgICAgICAgICAnaHJfbG9jYXRpb25fYWRkcmVzc19ibicgPT4gJHJlcXVlc3QtPmFkZHJlc3MsCiAgICAgICAgICAgICAgICAgICAgJ2hyX2xvY2F0aW9uX3VuaXRfaWQnID0+ICRyZXF1ZXN0LT51bml0X2lkLAogICAgICAgICAgICAgICAgXSk7CgogICAgICAgICAgICAgICAgREI6OmNvbW1pdCgpOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiB0cnVlLAogICAgICAgICAgICAgICAgICAgICdkYXRhJyA9PiBbCiAgICAgICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAiTG9jYXRpb24gaGFzIGJlZW4gc3RvcmVkIHN1Y2Nlc3NmdWxseS4iCiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgXSwgMjAwKTsKICAgICAgICAgICAgfWNhdGNoIChFeGNlcHRpb24gJGUpewogICAgICAgICAgICAgICAgREI6OnJvbGxiYWNrKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkZS0+Z2V0TWVzc2FnZSgpCiAgICAgICAgICAgICAgICBdLCA1MDApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICdzdWNjZXNzJyA9PiBmYWxzZSwKICAgICAgICAgICAgJ2Vycm9ycycgPT4gJHZhbGlkYXRvci0+ZXJyb3JzKCktPmFsbCgpCiAgICAgICAgXSwgNDIyKTsKICAgIH0KCiAgICAvKioKICAgICAqIExvY2F0aW9uIERldGFpbHMKICAgICAqIAogICAgICogR2V0IExvY2F0aW9uIGJ5IGl0J3MgdW5pcXVlIElELgogICAgICogCiAgICAgKiBAcXVlcnlQYXJhbSB0b2tlbiBzdHJpbmcgcmVxdWlyZWQgQXV0aGVudGljYXRpb24gVG9rZW4gTGlzdCB3b3VsZCBiZSBwcm92aWRlZCBieSBCSVpaU09MIEV4YW1wbGU6IGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6YWJjZGVmCiAgICAgKiBAcGF0aFBhcmFtIGxvY2F0aW9uX2lkIGludCByZXF1aXJlZCBJRCBvZiB0aGUgTG9jYXRpb24gRXhhbXBsZTogMTAwCiAgICAgKgogICAgICogQHJlc3BvbnNlIHsKICAgICAqICAgICAgInN1Y2Nlc3MiOiB0cnVlLAogICAgICogICAgICAiZGF0YSI6IHsKICAgICAqICAgICAgICAgICJsb2NhdGlvbiI6IHsKICAgICAqICAgICAgICAgICAgICAiaWQiOiA2LAogICAgICogICAgICAgICAgICAgICJjb2RlIjogIkRISyIsCiAgICAgKiAgICAgICAgICAgICAgIm5hbWUiOiAiRGhha2EiLAogICAgICogICAgICAgICAgICAgICJzaG9ydF9uYW1lIjogIkRoYWthIiwKICAgICAqICAgICAgICAgICAgICAiYWRkcmVzcyI6ICJEaGFrYSIsCiAgICAgKiAgICAgICAgICAgICAgInVuaXRfaWQiOiAxLAogICAgICogICAgICAgICAgICAgICJ1bml0X25hbWUiOiAiU09GVFdBUkUgU0hPUCBMVEQuIgogICAgICogICAgICAgICAgfQogICAgICogICAgICB9CiAgICAgKiAgfQogICAgICogCiAgICAgKiBAZ3JvdXAgTG9jYXRpb24KICAgICAqIEBwYXJhbSAgaW50ICAkaWQKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc2hvdyhMb2NhdGlvbiAkbG9jYXRpb24pCiAgICB7CiAgICAgICAgdHJ5ewogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gdHJ1ZSwKICAgICAgICAgICAgICAgICdkYXRhJyA9PiBbCiAgICAgICAgICAgICAgICAgICAgJ2xvY2F0aW9uJyA9PiBbCiAgICAgICAgICAgICAgICAgICAgICAnaWQnID0+ICRsb2NhdGlvbi0+aHJfbG9jYXRpb25faWQsCiAgICAgICAgICAgICAgICAgICAgICAnY29kZScgPT4gJGxvY2F0aW9uLT5ocl9sb2NhdGlvbl9jb2RlLAogICAgICAgICAgICAgICAgICAgICAgJ25hbWUnID0+ICRsb2NhdGlvbi0+aHJfbG9jYXRpb25fbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICdzaG9ydF9uYW1lJyA9PiAkbG9jYXRpb24tPmhyX2xvY2F0aW9uX3Nob3J0X25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAnYWRkcmVzcycgPT4gJGxvY2F0aW9uLT5ocl9sb2NhdGlvbl9hZGRyZXNzLAogICAgICAgICAgICAgICAgICAgICAgJ3VuaXRfaWQnID0+ICRsb2NhdGlvbi0+dW5pdC0+aHJfdW5pdF9pZCwKICAgICAgICAgICAgICAgICAgICAgICd1bml0X25hbWUnID0+ICRsb2NhdGlvbi0+dW5pdC0+aHJfdW5pdF9uYW1lLAogICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgXSwgMjAwKTsKICAgICAgICB9Y2F0Y2ggKEV4Y2VwdGlvbiAkZSl7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiBmYWxzZSwKICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkZS0+Z2V0TWVzc2FnZSgpCiAgICAgICAgICAgIF0sIDUwMCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogVXBkYXRlIExvY2F0aW9uCiAgICAgKiAKICAgICAqIFVwZGF0ZSBhbiBhdmFpbGFibGUgTG9jYXRpb24uCiAgICAgKiAKICAgICAqIEBxdWVyeVBhcmFtIHRva2VuIHN0cmluZyByZXF1aXJlZCBBdXRoZW50aWNhdGlvbiBUb2tlbiBMaXN0IHdvdWxkIGJlIHByb3ZpZGVkIGJ5IEJJWlpTT0wgRXhhbXBsZTogYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXphYmNkZWYKICAgICAqIEBib2R5UGFyYW0gY29kZSBzdHJpbmcgcmVxdWlyZWQgQ29kZSBvZiB0aGUgTG9jYXRpb24gRXhhbXBsZTogSUNUCiAgICAgKiBAYm9keVBhcmFtIG5hbWUgc3RyaW5nIHJlcXVpcmVkIE5hbWUgb2YgdGhlIExvY2F0aW9uIEV4YW1wbGU6IEluZm9ybWF0aW9uIFRlY2hub2xvZ3kKICAgICAqIEBib2R5UGFyYW0gc2hvcnRfbmFtZSBzdHJpbmcgcmVxdWlyZWQgU2hvcnQgTmFtZSBvZiB0aGUgTG9jYXRpb24gRXhhbXBsZTogMAogICAgICogQGJvZHlQYXJhbSBhZGRyZXNzIHRleHQgcmVxdWlyZWQgQWRkcmVzcyBvZiB0aGUgTG9jYXRpb24gRXhhbXBsZTogRGhha2EKICAgICAqIEBib2R5UGFyYW0gdW5pdF9pZCBpbnQgcmVxdWlyZWQgVW5pdCBJRCBvZiB0aGUgTG9jYXRpb24gRXhhbXBsZTogMTAwCiAgICAgKgogICAgICogQHJlc3BvbnNlIHsKICAgICAqICAgICAgICJzdWNjZXNzIjogdHJ1ZSwKICAgICAqICAgICAgICJkYXRhIjogewogICAgICogICAgICAgICAgICJtZXNzYWdlIjogIkxvY2F0aW9uIGhhcyBiZWVuIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5LiIKICAgICAqICAgICAgIH0KICAgICAqICAgfQogICAgICogCiAgICAgKiBAZ3JvdXAgTG9jYXRpb24KICAgICAqIEBwYXJhbSAgXElsbHVtaW5hdGVcSHR0cFxSZXF1ZXN0ICAkcmVxdWVzdAogICAgICogQHBhcmFtICBpbnQgICRpZAogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiB1cGRhdGUoUmVxdWVzdCAkcmVxdWVzdCwgJGlkKQogICAgewogICAgICAgICR2YWxpZGF0b3IgPSBcVmFsaWRhdG9yOjptYWtlKCRyZXF1ZXN0LT5hbGwoKSwgWwogICAgICAgICAgICAnY29kZScgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ3Nob3J0X25hbWUnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICduYW1lJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAnYWRkcmVzcycgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ3VuaXRfaWQnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgXSk7CgogICAgICAgIGlmICgkdmFsaWRhdG9yLT5wYXNzZXMoKSkgewogICAgICAgICAgICBEQjo6YmVnaW5UcmFuc2FjdGlvbigpOwogICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICBMb2NhdGlvbjo6dXBkYXRlT3JDcmVhdGUoWwogICAgICAgICAgICAgICAgICAgICdocl9sb2NhdGlvbl9pZCcgPT4gJGlkCiAgICAgICAgICAgICAgICBdLFsKICAgICAgICAgICAgICAgICAgICAnaHJfbG9jYXRpb25fY29kZScgPT4gJHJlcXVlc3QtPmNvZGUsCiAgICAgICAgICAgICAgICAgICAgJ2hyX2xvY2F0aW9uX25hbWUnID0+ICRyZXF1ZXN0LT5uYW1lLAogICAgICAgICAgICAgICAgICAgICdocl9sb2NhdGlvbl9uYW1lX2JuJyA9PiAkcmVxdWVzdC0+bmFtZSwKICAgICAgICAgICAgICAgICAgICAnaHJfbG9jYXRpb25fc2hvcnRfbmFtZScgPT4gJHJlcXVlc3QtPnNob3J0X25hbWUsCiAgICAgICAgICAgICAgICAgICAgJ2hyX2xvY2F0aW9uX2FkZHJlc3MnID0+ICRyZXF1ZXN0LT5hZGRyZXNzLAogICAgICAgICAgICAgICAgICAgICdocl9sb2NhdGlvbl9hZGRyZXNzX2JuJyA9PiAkcmVxdWVzdC0+YWRkcmVzcywKICAgICAgICAgICAgICAgICAgICAnaHJfbG9jYXRpb25fdW5pdF9pZCcgPT4gJHJlcXVlc3QtPnVuaXRfaWQsCiAgICAgICAgICAgICAgICBdKTsKCiAgICAgICAgICAgICAgICBEQjo6Y29tbWl0KCk7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IHRydWUsCiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnID0+IFsKICAgICAgICAgICAgICAgICAgICAgICAgJ21lc3NhZ2UnID0+ICJMb2NhdGlvbiBoYXMgYmVlbiB1cGRhdGVkIHN1Y2Nlc3NmdWxseS4iCiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgXSwgMjAwKTsKICAgICAgICAgICAgfWNhdGNoIChFeGNlcHRpb24gJGUpewogICAgICAgICAgICAgICAgREI6OnJvbGxiYWNrKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkZS0+Z2V0TWVzc2FnZSgpCiAgICAgICAgICAgICAgICBdLCA1MDApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICdzdWNjZXNzJyA9PiBmYWxzZSwKICAgICAgICAgICAgJ2Vycm9ycycgPT4gJHZhbGlkYXRvci0+ZXJyb3JzKCktPmFsbCgpCiAgICAgICAgXSwgNDIyKTsKICAgIH0KCiAgICAvKioKICAgICAqIERlbGV0ZSBMb2NhdGlvbgogICAgICogCiAgICAgKiBEZWxldGUgYW4gYXZhaWxhYmxlIExvY2F0aW9uLgogICAgICogCiAgICAgKiBAcXVlcnlQYXJhbSB0b2tlbiBzdHJpbmcgcmVxdWlyZWQgQXV0aGVudGljYXRpb24gVG9rZW4gTGlzdCB3b3VsZCBiZSBwcm92aWRlZCBieSBCSVpaU09MIEV4YW1wbGU6IGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6YWJjZGVmCiAgICAgKiBAcGF0aFBhcmFtIGxvY2F0aW9uX2lkIGludCByZXF1aXJlZCBVbmlxdWUgSUQgb2YgdGhlIExvY2F0aW9uIEV4YW1wbGU6IDEwMAogICAgICoKICAgICAqIEByZXNwb25zZSB7CiAgICAgKiAgICAgICAic3VjY2VzcyI6IHRydWUsCiAgICAgKiAgICAgICAiZGF0YSI6IHsKICAgICAqICAgICAgICAgICAibWVzc2FnZSI6ICJMb2NhdGlvbiBoYXMgYmVlbiBEZWxldGVkIHN1Y2Nlc3NmdWxseS4iCiAgICAgKiAgICAgICB9CiAgICAgKiAgIH0KICAgICAqIAogICAgICogQGdyb3VwIExvY2F0aW9uCiAgICAgKiBAcGFyYW0gIGludCAgJGlkCiAgICAgKiBAcmV0dXJuIFxJbGx1bWluYXRlXEh0dHBcUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGRlc3Ryb3koJGlkKQogICAgewogICAgICAgIERCOjpiZWdpblRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJ5ewogICAgICAgICAgICBMb2NhdGlvbjo6d2hlcmUoJ2hyX2xvY2F0aW9uX2lkJywgJGlkKS0+ZGVsZXRlKCk7CgogICAgICAgICAgICBEQjo6Y29tbWl0KCk7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiB0cnVlLAogICAgICAgICAgICAgICAgJ2RhdGEnID0+IFsKICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gIkxvY2F0aW9uIGhhcyBiZWVuIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5LiIKICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgXSwgMjAwKTsKICAgICAgICB9Y2F0Y2ggKEV4Y2VwdGlvbiAkZSl7CiAgICAgICAgICAgIERCOjpyb2xsYmFjaygpOwogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gZmFsc2UsCiAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gJGUtPmdldE1lc3NhZ2UoKQogICAgICAgICAgICBdLCA1MDApOwogICAgICAgIH0KICAgIH0KfQo=