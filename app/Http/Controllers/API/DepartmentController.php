<?php
bolt_decrypt( __FILE__ , '74TpYx'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcQVBJOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKdXNlIERCOwoKdXNlIEFwcFxNb2RlbHNcSHJcVW5pdDsKdXNlIEFwcFxNb2RlbHNcSHJcRGVwYXJ0bWVudDsKdXNlIEFwcFxNb2RlbHNcSHJcU2VjdGlvbjsKdXNlIEFwcFxNb2RlbHNcSHJcTG9jYXRpb247CnVzZSBBcHBcTW9kZWxzXEhyXERlc2lnbmF0aW9uOwp1c2UgQXBwXE1vZGVsc1xFbXBsb3llZTsKCmNsYXNzIERlcGFydG1lbnRDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CiAgICAvKioKICAgICAqIExpc3Qgb2YgRGVwYXJ0bWVudHMKICAgICAqIAogICAgICogR2V0IExpc3Qgb2YgYWxsIGF2YWlsYWJsZSBEZXBhcnRtZW50cy4KICAgICAqIAogICAgICogQHF1ZXJ5UGFyYW0gdG9rZW4gc3RyaW5nIHJlcXVpcmVkIEF1dGhlbnRpY2F0aW9uIFRva2VuIExpc3Qgd291bGQgYmUgcHJvdmlkZWQgYnkgQklaWlNPTCBFeGFtcGxlOiBhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5emFiY2RlZgogICAgICoKICAgICAqIEBncm91cCBEZXBhcnRtZW50CiAgICAgKiBAcmV0dXJuIFxJbGx1bWluYXRlXEh0dHBcUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGluZGV4KFJlcXVlc3QgJHJlcXVlc3QpewogICAgICAgIHRyeXsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IHRydWUsCiAgICAgICAgICAgICAgICAnc3RhdHVzJyA9PiB0cnVlLAogICAgICAgICAgICAgICAgJ3N0YXR1c19jb2RlJyA9PiAyMDAsCiAgICAgICAgICAgICAgICAnZGF0YScgPT4gWwogICAgICAgICAgICAgICAgICAgICdkZXBhcnRtZW50cycgPT4gRGVwYXJ0bWVudDo6am9pbignaHJfdW5pdCcsICdocl91bml0LmhyX3VuaXRfaWQnLCAnPScsICdocl9kZXBhcnRtZW50LmhyX3VuaXRfaWQnKQogICAgICAgICAgICAgICAgICAgIC0+am9pbignY29tcGFuaWVzJywgJ2NvbXBhbmllcy5pZCcsICc9JywgJ2hyX3VuaXQuY29tcGFueV9pZCcpCgogICAgICAgICAgICAgICAgICAgIC0+Z2V0KFsKICAgICAgICAgICAgICAgICAgICAgIERCOjpyYXcoJ2hyX2RlcGFydG1lbnRfaWQgYXMgaWQnKSwKICAgICAgICAgICAgICAgICAgICAgIERCOjpyYXcoJ2hyX2RlcGFydG1lbnRfY29kZSBhcyBjb2RlJyksCiAgICAgICAgICAgICAgICAgICAgICBEQjo6cmF3KCdocl9kZXBhcnRtZW50X25hbWUgYXMgbmFtZScpLAogICAgICAgICAgICAgICAgICAgICAgREI6OnJhdygnaHJfZGVwYXJ0bWVudF9taW5fcmFuZ2UgYXMgbWluX3JhbmdlJyksCiAgICAgICAgICAgICAgICAgICAgICBEQjo6cmF3KCdocl9kZXBhcnRtZW50X21heF9yYW5nZSBhcyBtYXhfcmFuZ2UnKSwKCiAgICAgICAgICAgICAgICAgICAgICBEQjo6cmF3KCdocl91bml0LmhyX3VuaXRfY29kZSBhcyB1bml0X2NvZGUnKSwKICAgICAgICAgICAgICAgICAgICAgIERCOjpyYXcoJ2hyX3VuaXQuaHJfdW5pdF9uYW1lIGFzIHVuaXRfbmFtZScpLAoKICAgICAgICAgICAgICAgICAgICAgIERCOjpyYXcoJ2NvbXBhbmllcy5jb2RlIGFzIGNvbXBhbnlfY29kZScpLAogICAgICAgICAgICAgICAgICAgICAgREI6OnJhdygnY29tcGFuaWVzLm5hbWUgYXMgY29tcGFueV9uYW1lJyksCiAgICAgICAgICAgICAgICAgICAgXSksCiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIF0sIDIwMCk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiBmYWxzZSwKICAgICAgICAgICAgICAgICdzdGF0dXMnID0+IGZhbHNlLAogICAgICAgICAgICAgICAgJ3N0YXR1c19jb2RlJyA9PiA1MDAsCiAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gJHRoLT5nZXRNZXNzYWdlKCkKICAgICAgICAgICAgXSwgNTAwKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBTdG9yZSBEZXBhcnRtZW50CiAgICAgKiAKICAgICAqIFN0b3JlIGEgbmV3IERlcGFydG1lbnQuCiAgICAgKiAKICAgICAqIEBxdWVyeVBhcmFtIHRva2VuIHN0cmluZyByZXF1aXJlZCBBdXRoZW50aWNhdGlvbiBUb2tlbiBMaXN0IHdvdWxkIGJlIHByb3ZpZGVkIGJ5IEJJWlpTT0wgRXhhbXBsZTogYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXphYmNkZWYKICAgICAqIEBib2R5UGFyYW0gaHJfdW5pdF9pZCBpbnRlZ2VyIHJlcXVpcmVkIFVuaXQgSUQgRXhhbXBsZTogMQogICAgICogQGJvZHlQYXJhbSBjb2RlIHN0cmluZyByZXF1aXJlZCBDb2RlIG9mIHRoZSBEZXBhcnRtZW50IEV4YW1wbGU6IElDVAogICAgICogQGJvZHlQYXJhbSBuYW1lIHN0cmluZyByZXF1aXJlZCBOYW1lIG9mIHRoZSBEZXBhcnRtZW50IEV4YW1wbGU6IEluZm9ybWF0aW9uIFRlY2hub2xvZ3kKICAgICAqIEBib2R5UGFyYW0gbWluX3JhbmdlIG51bWJlciByZXF1aXJlZCBNaW5pbXVtIEFwcHJvdmFsIFJhbmdlIG9mIHRoZSBEZXBhcnRtZW50IEV4YW1wbGU6IDAKICAgICAqIEBib2R5UGFyYW0gbWF4X3JhbmdlIG51bWJlciByZXF1aXJlZCBNYXhpbXVtIEFwcHJvdmFsIFJhbmdlIG9mIHRoZSBEZXBhcnRtZW50IEV4YW1wbGU6IDEwMDAwMDAwCiAgICAgKgogICAgICogQHJlc3BvbnNlIHsKICAgICAqICAgICAgICJzdWNjZXNzIjogdHJ1ZSwKICAgICAqICAgICAgICJzdGF0dXMiOiB0cnVlLAogICAgICogICAgICAgInN1Y2Nlc3NfY29kZSI6IDIwMCwKICAgICAqICAgICAgICJkYXRhIjogewogICAgICogICAgICAgICAgICJtZXNzYWdlIjogIkRlcGFydG1lbnQgaGFzIGJlZW4gc3RvcmVkIHN1Y2Nlc3NmdWxseS4iCiAgICAgKiAgICAgICB9CiAgICAgKiAgIH0KICAgICAqIAogICAgICogQGdyb3VwIERlcGFydG1lbnQKICAgICAqIEBwYXJhbSAgXElsbHVtaW5hdGVcSHR0cFxSZXF1ZXN0ICAkcmVxdWVzdAogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBzdG9yZShSZXF1ZXN0ICRyZXF1ZXN0KQogICAgewogICAgICAgICR2YWxpZGF0b3IgPSBcVmFsaWRhdG9yOjptYWtlKCRyZXF1ZXN0LT5hbGwoKSwgWwogICAgICAgICAgICAnaHJfdW5pdF9pZCcgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ2NvZGUnID0+ICdyZXF1aXJlZHx1bmlxdWU6aHJfZGVwYXJ0bWVudCxocl9kZXBhcnRtZW50X2NvZGUnLAogICAgICAgICAgICAnbmFtZScgPT4gJ3JlcXVpcmVkfHVuaXF1ZTpocl9kZXBhcnRtZW50LGhyX2RlcGFydG1lbnRfbmFtZScsCiAgICAgICAgICAgICdtaW5fcmFuZ2UnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICdtYXhfcmFuZ2UnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgXSk7CgogICAgICAgIGlmICgkdmFsaWRhdG9yLT5wYXNzZXMoKSkgewogICAgICAgICAgICBEQjo6YmVnaW5UcmFuc2FjdGlvbigpOwogICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICBEZXBhcnRtZW50OjpjcmVhdGUoWwogICAgICAgICAgICAgICAgICAgICdocl91bml0X2lkJyA9PiAkcmVxdWVzdC0+aHJfdW5pdF9pZCwKICAgICAgICAgICAgICAgICAgICAnaHJfZGVwYXJ0bWVudF9jb2RlJyA9PiAkcmVxdWVzdC0+Y29kZSwKICAgICAgICAgICAgICAgICAgICAnaHJfZGVwYXJ0bWVudF9uYW1lJyA9PiAkcmVxdWVzdC0+bmFtZSwKICAgICAgICAgICAgICAgICAgICAnaHJfZGVwYXJ0bWVudF9uYW1lX2JuJyA9PiAkcmVxdWVzdC0+bmFtZSwKICAgICAgICAgICAgICAgICAgICAnaHJfZGVwYXJ0bWVudF9taW5fcmFuZ2UnID0+ICRyZXF1ZXN0LT5taW5fcmFuZ2UsCiAgICAgICAgICAgICAgICAgICAgJ2hyX2RlcGFydG1lbnRfbWF4X3JhbmdlJyA9PiAkcmVxdWVzdC0+bWF4X3JhbmdlLAogICAgICAgICAgICAgICAgXSk7CgogICAgICAgICAgICAgICAgREI6OmNvbW1pdCgpOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiB0cnVlLAogICAgICAgICAgICAgICAgICAgICdzdGF0dXMnID0+IHRydWUsCiAgICAgICAgICAgICAgICAgICAgJ3N0YXR1c19jb2RlJyA9PiAyMDAsCiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnID0+IFsKICAgICAgICAgICAgICAgICAgICAgICAgJ21lc3NhZ2UnID0+ICJEZXBhcnRtZW50IGhhcyBiZWVuIHN0b3JlZCBzdWNjZXNzZnVsbHkuIgogICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgIF0sIDIwMCk7CiAgICAgICAgICAgIH1jYXRjaCAoXFRocm93YWJsZSAkdGgpewogICAgICAgICAgICAgICAgREI6OnJvbGxiYWNrKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICdzdGF0dXMnID0+IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICdzdGF0dXNfY29kZScgPT4gNTAwLAogICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkdGgtPmdldE1lc3NhZ2UoKQogICAgICAgICAgICAgICAgXSwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAnc3VjY2VzcycgPT4gZmFsc2UsCiAgICAgICAgICAgICdzdGF0dXMnID0+IGZhbHNlLAogICAgICAgICAgICAnc3RhdHVzX2NvZGUnID0+IDQyMiwKICAgICAgICAgICAgJ2Vycm9ycycgPT4gJHZhbGlkYXRvci0+ZXJyb3JzKCktPmFsbCgpCiAgICAgICAgXSwgNDIyKTsKICAgIH0KCiAgICAvKioKICAgICAqIERlcGFydG1lbnQgRGV0YWlscwogICAgICogCiAgICAgKiBHZXQgRGVwYXJ0bWVudCBieSBpdCdzIHVuaXF1ZSBJRC4KICAgICAqIAogICAgICogQHF1ZXJ5UGFyYW0gdG9rZW4gc3RyaW5nIHJlcXVpcmVkIEF1dGhlbnRpY2F0aW9uIFRva2VuIExpc3Qgd291bGQgYmUgcHJvdmlkZWQgYnkgQklaWlNPTCBFeGFtcGxlOiBhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5emFiY2RlZgogICAgICogQHBhdGhQYXJhbSBkZXBydG1lbnRfaWQgaW50IHJlcXVpcmVkIElEIG9mIHRoZSBEZXBhcnRtZW50IEV4YW1wbGU6IDEwMAogICAgICoKICAgICAqIEByZXNwb25zZSB7CiAgICAgKiAgICAgICJzdWNjZXNzIjogdHJ1ZSwKICAgICAqICAgICAgInN0YXR1cyI6IHRydWUsCiAgICAgKiAgICAgICJzdWNjZXNzX2NvZGUiOiAyMDAsCiAgICAgKiAgICAgICJkYXRhIjogewogICAgICogICAgICAgICAgImRlcGFydG1lbnQiOiB7CiAgICAgKiAgICAgICAgICAgICAgImlkIjogMTA2LAogICAgICogICAgICAgICAgICAgICJjb2RlIjogIkZpbmFuY2UgJiBBY2NvdW50cyIsCiAgICAgKiAgICAgICAgICAgICAgIm5hbWUiOiAiRmluYW5jZSAmIEFjY291bnRzIiwKICAgICAqICAgICAgICAgICAgICAibWluX3JhbmdlIjogIjAiLAogICAgICogICAgICAgICAgICAgICJtYXhfcmFuZ2UiOiAiMTAwMDAwMDAwMCIKICAgICAqICAgICAgICAgIH0KICAgICAqICAgICAgfQogICAgICogIH0KICAgICAqIAogICAgICogQGdyb3VwIERlcGFydG1lbnQKICAgICAqIEBwYXJhbSAgaW50ICAkaWQKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc2hvdyhEZXBhcnRtZW50ICRkZXBhcnRtZW50KQogICAgewogICAgICAgIHRyeXsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IHRydWUsCiAgICAgICAgICAgICAgICAnc3RhdHVzJyA9PiB0cnVlLAogICAgICAgICAgICAgICAgJ3N0YXR1c19jb2RlJyA9PiAyMDAsCiAgICAgICAgICAgICAgICAnZGF0YScgPT4gWwogICAgICAgICAgICAgICAgICAgICdkZXBhcnRtZW50JyA9PiBbCiAgICAgICAgICAgICAgICAgICAgICAnaWQnID0+ICRkZXBhcnRtZW50LT5ocl9kZXBhcnRtZW50X2lkLAogICAgICAgICAgICAgICAgICAgICAgJ2NvZGUnID0+ICRkZXBhcnRtZW50LT5ocl9kZXBhcnRtZW50X2NvZGUsCiAgICAgICAgICAgICAgICAgICAgICAnbmFtZScgPT4gJGRlcGFydG1lbnQtPmhyX2RlcGFydG1lbnRfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICdtaW5fcmFuZ2UnID0+ICRkZXBhcnRtZW50LT5ocl9kZXBhcnRtZW50X21pbl9yYW5nZSwKICAgICAgICAgICAgICAgICAgICAgICdtYXhfcmFuZ2UnID0+ICRkZXBhcnRtZW50LT5ocl9kZXBhcnRtZW50X21heF9yYW5nZSwKICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIF0sIDIwMCk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiBmYWxzZSwKICAgICAgICAgICAgICAgICdzdGF0dXMnID0+IGZhbHNlLAogICAgICAgICAgICAgICAgJ3N0YXR1c19jb2RlJyA9PiA1MDAsCiAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gJHRoLT5nZXRNZXNzYWdlKCkKICAgICAgICAgICAgXSwgNTAwKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBVcGRhdGUgRGVwYXJ0bWVudAogICAgICogCiAgICAgKiBVcGRhdGUgYW4gYXZhaWxhYmxlIERlcGFydG1lbnQuCiAgICAgKiAKICAgICAqIEBxdWVyeVBhcmFtIHRva2VuIHN0cmluZyByZXF1aXJlZCBBdXRoZW50aWNhdGlvbiBUb2tlbiBMaXN0IHdvdWxkIGJlIHByb3ZpZGVkIGJ5IEJJWlpTT0wgRXhhbXBsZTogYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXphYmNkZWYKICAgICAqIEBib2R5UGFyYW0gaHJfdW5pdF9pZCBpbnRlZ2VyIHJlcXVpcmVkIFVuaXQgSUQgRXhhbXBsZTogMQogICAgICogQGJvZHlQYXJhbSBjb2RlIHN0cmluZyByZXF1aXJlZCBDb2RlIG9mIHRoZSBEZXBhcnRtZW50IEV4YW1wbGU6IElDVAogICAgICogQGJvZHlQYXJhbSBuYW1lIHN0cmluZyByZXF1aXJlZCBOYW1lIG9mIHRoZSBEZXBhcnRtZW50IEV4YW1wbGU6IEluZm9ybWF0aW9uIFRlY2hub2xvZ3kKICAgICAqIEBib2R5UGFyYW0gbWluX3JhbmdlIG51bWJlciByZXF1aXJlZCBNaW5pbXVtIEFwcHJvdmFsIFJhbmdlIG9mIHRoZSBEZXBhcnRtZW50IEV4YW1wbGU6IDAKICAgICAqIEBib2R5UGFyYW0gbWF4X3JhbmdlIG51bWJlciByZXF1aXJlZCBNYXhpbXVtIEFwcHJvdmFsIFJhbmdlIG9mIHRoZSBEZXBhcnRtZW50IEV4YW1wbGU6IDEwMDAwMDAwCiAgICAgKgogICAgICogQHJlc3BvbnNlIHsKICAgICAqICAgICAgICJzdWNjZXNzIjogdHJ1ZSwKICAgICAqICAgICAgICJzdGF0dXMiOiB0cnVlLAogICAgICogICAgICAgInN1Y2Nlc3NfY29kZSI6IDIwMCwKICAgICAqICAgICAgICJkYXRhIjogewogICAgICogICAgICAgICAgICJtZXNzYWdlIjogIkRlcGFydG1lbnQgaGFzIGJlZW4gdXBkYXRlZCBzdWNjZXNzZnVsbHkuIgogICAgICogICAgICAgfQogICAgICogICB9CiAgICAgKiAKICAgICAqIEBncm91cCBEZXBhcnRtZW50CiAgICAgKiBAcGFyYW0gIFxJbGx1bWluYXRlXEh0dHBcUmVxdWVzdCAgJHJlcXVlc3QKICAgICAqIEBwYXJhbSAgaW50ICAkaWQKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gdXBkYXRlKFJlcXVlc3QgJHJlcXVlc3QsICRpZCkKICAgIHsKICAgICAgICAkdmFsaWRhdG9yID0gXFZhbGlkYXRvcjo6bWFrZSgkcmVxdWVzdC0+YWxsKCksIFsKICAgICAgICAgICAgJ2hyX3VuaXRfaWQnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICdjb2RlJyA9PiAncmVxdWlyZWR8dW5pcXVlOmhyX2RlcGFydG1lbnQsaHJfZGVwYXJ0bWVudF9jb2RlJywKICAgICAgICAgICAgJ25hbWUnID0+ICdyZXF1aXJlZHx1bmlxdWU6aHJfZGVwYXJ0bWVudCxocl9kZXBhcnRtZW50X25hbWUnLAogICAgICAgICAgICAnbWluX3JhbmdlJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAnbWF4X3JhbmdlJyA9PiAncmVxdWlyZWQnLAogICAgICAgIF0pOwoKICAgICAgICBpZiAoJHZhbGlkYXRvci0+cGFzc2VzKCkpIHsKICAgICAgICAgICAgREI6OmJlZ2luVHJhbnNhY3Rpb24oKTsKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgRGVwYXJ0bWVudDo6dXBkYXRlT3JDcmVhdGUoWwogICAgICAgICAgICAgICAgICAgICdocl9kZXBhcnRtZW50X2lkJyA9PiAkaWQKICAgICAgICAgICAgICAgIF0sWwogICAgICAgICAgICAgICAgICAgICdocl91bml0X2lkJyA9PiAkcmVxdWVzdC0+aHJfdW5pdF9pZCwKICAgICAgICAgICAgICAgICAgICAnaHJfZGVwYXJ0bWVudF9jb2RlJyA9PiAkcmVxdWVzdC0+Y29kZSwKICAgICAgICAgICAgICAgICAgICAnaHJfZGVwYXJ0bWVudF9uYW1lJyA9PiAkcmVxdWVzdC0+bmFtZSwKICAgICAgICAgICAgICAgICAgICAnaHJfZGVwYXJ0bWVudF9uYW1lX2JuJyA9PiAkcmVxdWVzdC0+bmFtZSwKICAgICAgICAgICAgICAgICAgICAnaHJfZGVwYXJ0bWVudF9taW5fcmFuZ2UnID0+ICRyZXF1ZXN0LT5taW5fcmFuZ2UsCiAgICAgICAgICAgICAgICAgICAgJ2hyX2RlcGFydG1lbnRfbWF4X3JhbmdlJyA9PiAkcmVxdWVzdC0+bWF4X3JhbmdlLAogICAgICAgICAgICAgICAgXSk7CgogICAgICAgICAgICAgICAgREI6OmNvbW1pdCgpOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiB0cnVlLAogICAgICAgICAgICAgICAgICAgICdzdGF0dXMnID0+IHRydWUsCiAgICAgICAgICAgICAgICAgICAgJ3N0YXR1c19jb2RlJyA9PiAyMDAsCiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnID0+IFsKICAgICAgICAgICAgICAgICAgICAgICAgJ21lc3NhZ2UnID0+ICJEZXBhcnRtZW50IGhhcyBiZWVuIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5LiIKICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICBdLCAyMDApOwogICAgICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgICAgIERCOjpyb2xsYmFjaygpOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAnc3RhdHVzJyA9PiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAnc3RhdHVzX2NvZGUnID0+IDUwMCwKICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gJHRoLT5nZXRNZXNzYWdlKCkKICAgICAgICAgICAgICAgIF0sIDUwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IGZhbHNlLAogICAgICAgICAgICAnc3RhdHVzJyA9PiBmYWxzZSwKICAgICAgICAgICAgJ3N0YXR1c19jb2RlJyA9PiA0MjIsCiAgICAgICAgICAgICdlcnJvcnMnID0+ICR2YWxpZGF0b3ItPmVycm9ycygpLT5hbGwoKQogICAgICAgIF0sIDQyMik7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWxldGUgRGVwYXJ0bWVudAogICAgICogCiAgICAgKiBEZWxldGUgYW4gYXZhaWxhYmxlIERlcGFydG1lbnQuCiAgICAgKiAKICAgICAqIEBxdWVyeVBhcmFtIHRva2VuIHN0cmluZyByZXF1aXJlZCBBdXRoZW50aWNhdGlvbiBUb2tlbiBMaXN0IHdvdWxkIGJlIHByb3ZpZGVkIGJ5IEJJWlpTT0wgRXhhbXBsZTogYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXphYmNkZWYKICAgICAqIEBwYXRoUGFyYW0gZGVwYXJ0bWVudF9pZCBpbnQgcmVxdWlyZWQgVW5pcXVlIElEIG9mIHRoZSBEZXBhcnRtZW50IEV4YW1wbGU6IDEwMAogICAgICoKICAgICAqIEByZXNwb25zZSB7CiAgICAgKiAgICAgICAic3VjY2VzcyI6IHRydWUsCiAgICAgKiAgICAgICAic3RhdHVzIjogdHJ1ZSwKICAgICAqICAgICAgICJzdWNjZXNzX2NvZGUiOiAyMDAsCiAgICAgKiAgICAgICAiZGF0YSI6IHsKICAgICAqICAgICAgICAgICAibWVzc2FnZSI6ICJEZXBhcnRtZW50IGhhcyBiZWVuIERlbGV0ZWQgc3VjY2Vzc2Z1bGx5LiIKICAgICAqICAgICAgIH0KICAgICAqICAgfQogICAgICogCiAgICAgKiBAZ3JvdXAgRGVwYXJ0bWVudAogICAgICogQHBhcmFtICBpbnQgICRpZAogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBkZXN0cm95KCRpZCkKICAgIHsKICAgICAgICBEQjo6YmVnaW5UcmFuc2FjdGlvbigpOwogICAgICAgIHRyeXsKICAgICAgICAgICAgRGVwYXJ0bWVudDo6d2hlcmUoJ2hyX2RlcGFydG1lbnRfaWQnLCAkaWQpLT5kZWxldGUoKTsKCiAgICAgICAgICAgIERCOjpjb21taXQoKTsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IHRydWUsCiAgICAgICAgICAgICAgICAnc3RhdHVzJyA9PiB0cnVlLAogICAgICAgICAgICAgICAgJ3N0YXR1c19jb2RlJyA9PiAyMDAsCiAgICAgICAgICAgICAgICAnZGF0YScgPT4gWwogICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAiRGVwYXJ0bWVudCBoYXMgYmVlbiBkZWxldGVkIHN1Y2Nlc3NmdWxseS4iCiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIF0sIDIwMCk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIERCOjpyb2xsYmFjaygpOwogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gZmFsc2UsCiAgICAgICAgICAgICAgICAnc3RhdHVzJyA9PiBmYWxzZSwKICAgICAgICAgICAgICAgICdzdGF0dXNfY29kZScgPT4gNTAwLAogICAgICAgICAgICAgICAgJ21lc3NhZ2UnID0+ICR0aC0+Z2V0TWVzc2FnZSgpCiAgICAgICAgICAgIF0sIDUwMCk7CiAgICAgICAgfQogICAgfQp9Cg==